{"version":3,"sources":["index.js"],"names":["container","renderer","transition","languageSelected","transitionParams","clock","THREE","sceneCityCamera","sceneCityInfoCamera","loadingTag","document","getElementById","style","display","aspectTag","zoneHeading","zonePanel","zoneTitle","rotateDiv","zoneName","fontFamily","body","addEventListener","e","target","console","log","id","checked","isTouchScreen","createEvent","is_touch_device","window","scrollTo","bodyElement","getElementsByTagName","overflowY","disableBodyScroll","draggable","antialias","devicePixelRatio","setPixelRatio","setSize","innerWidth","innerHeight","appendChild","domElement","sceneA","City","sceneB","CityInfo","Transition","startButton","color","fileName","name","trackDuration","audioController","src","load","muted","loop","currentTime","play","playAudio","enableBodyScroll","languageChangeRefrash","onLangButtonPressed","currentZoneSelected","animateTransition","xBody","top","left","onBackButtonPressed","ResetHtmlCityInfoScene","isAnimatingItemInfo","currentItem","itemsPerZone","updateLeftRightArrows","itemToShow","TweenMax","to","position","x","itemsCameraPos","y","z","onComplete","itemsInfoCameraAnimFinished","ease","rotation","degToRad","itemsCameraRot","UpdateItemsDetails","onRightArrowClicked","onLeftArrowClicked","innerHTML","itemsInfoData","items","infoEN","textAlign","info","onInfoButtonClicked","init","animate","requestAnimationFrame","render","getDelta","Audio","muteButton","musicVolume","volume","zoneNameAR","zoneNameEN","headingEN","heading","hideAddressBar","location","hash","height","outerHeight","setTimeout","test","navigator","userAgent","this","scene","cameraOrtho","textures","loader","transitionTexture","quadmaterial","uniforms","tDiffuse1","value","tDiffuse2","mixRatio","threshold","useTexture","tMixTexture","vertexShader","join","fragmentShader","quadgeometry","updateTransitionState","quad","add","fbo","texture","needChange","setTextureThreshold","setTexture","i","loopTexture","delta","setRenderTarget","clear","pageYOffset","isCityLoaded","isCityInfoLoaded","aspect","updateProjectionMatrix","event","isMouseDown","isDragging","mouse","clientX","clientY","deltaMove","offsetX","previousMousePosition","offsetY","appState","deltaRotationQuaternion","setFromEuler","fCity","quaternion","multiplyQuaternions","deltaRotation","itemToRotate","liftHero","rotateHero","whichZoneFound","welcomeToZone","resetRotation","touches","length","isTouchDragging","rect","getBoundingClientRect","eventOffSetX","targetTouches","pageX","eventOffSetY","pageY","checkForZoneElements","cScene","cCamera","whichZoneFoundPrev","textContent","side","extensions","derivatives","counterToCheckScroll","overlay","clearColor","camera","cityScene","cityCamera","mountain","cityPos","Vector3","fog","background","light","directionalLight","set","castShadow","shadow","bottom","right","manager","onStart","url","itemsLoaded","itemsTotal","onLoad","MathUtils","gsap","timeline","scrollTrigger","start","end","scrub","scroller","opacity","children","material","appStateChangeTo0","appStateChangeTo1","pinZ1","repeatDelay","repeat","yoyo","Elastic","easeInOut","pinZ2","delay","pinZ3","push","spriteMaterial1","map","cloudSpriteMap1","transparent","depthWrite","spriteMaterial2","cloudSpriteMap2","scale","Math","random","spriteCloud","clouds","speeds","directions","PI","createCloudSystem","onProgress","onError","FBXLoader","object","clone","traverse","child","isMesh","receiveShadow","wireframeGeomtry","geometry","wireframeMaterial","wireframe","blending","multiplyScalar","attach","obj","zone1","zone2","zone3","parameters","particles","materials","vertices","textureLoader","crossOrigin","sprite1","setAttribute","sprite","size","depthTest","setHSL","createParticleSystem","loadCity","renderTargetParameters","minFilter","magFilter","format","stencilBuffer","rtt","setClearColor","time","Date","now","updateParticles","c","updateCloudSystem","lookAt","isReachedCity","scrollY","scrollHeight","scroll","raycaster","params","Line","zoneAnimation","zoneAnimationCounter","mousePos","setFromCamera","intersects","intersectObjects","parent","r","g","b","Power2","easeOut","number","amount","h1","h2","h3","h4","h5","h6","h7","h8","h9","buttonL","buttonR","Object3D","registerPlugin","ScrollTrigger","cityInfoScene","cityInfoCamera","lightCI","directionalLightCI","pos","loadCityInfo"],"mappings":"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","file":"static/js/main.e45dc9e6.chunk.js","sourcesContent":["import './index.css';\nimport './index.scss'; \n\nimport * as THREE from 'three';\n\n//import { BufferGeometryUtils } from 'three/examples/jsm/utils/BufferGeometryUtils';\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\n\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader';\n\nimport {TweenMax, gsap} from 'gsap';\n// import {SplitText} from 'gsap/src/SplitText';\n\nimport { Power2, Bounce, Elastic } from 'gsap/gsap-core';\nimport {ScrollTrigger} from 'gsap/ScrollTrigger';\n\nimport { Object3D, Vector3, MathUtils } from 'three';\n\n// gsap.registerPlugin(SplitText);\n\nvar container;\nvar renderer;\nvar transition;\nvar languageSelected = 0;\n\nvar transitionParams = {\n\t\"useTexture\": true,\n\t\"transition\": 0.5,\n\t\"transitionSpeed\": 2.0,\n\t\"texture\": 5,\n\t\"loopTexture\": true,\n\t\"animateTransition\": true,\n\t\"textureThreshold\": 0.3\n};\n\nvar clock = new THREE.Clock();\nvar sceneCityCamera = [];\nvar sceneCityInfoCamera = [];\n\nvar loadingTag = document.getElementById(\"loadingScreen\");\nloadingTag.style.display = 'block';\n\nvar aspectTag = document.getElementById(\"aspectOverlay\");\naspectTag.style.display = 'none';\n\nvar zoneHeading = document.getElementById(\"zoneHeading\");\nzoneHeading.style.display = 'none';\n\nvar zonePanel = document.getElementById(\"zoneInfo\");\nzonePanel.style.display = 'none';\n\nvar zoneTitle = document.getElementById(\"zoneTitle\");\nzoneTitle.style.display = 'none';\n\nvar rotateDiv = document.getElementById(\"rotateDiv\");\nrotateDiv.style.display = 'none';\n\nvar zoneName = document.getElementById(\"zoneName\");\n\nzoneName.style.fontFamily = 'AlmaraiBold';\n\n// document.getElementById(\"shareOnWhatsApp\").addEventListener('click', function() {\n//   //var hastag = \"اليوم_الوطني_السعودي_90#\";\n//   var message = \"Happy National Day! #SaudiNationalDay%0a%0aAn Experience designed and developed by Midwam%0ahttps://www.midwam.com\";\n//   console.log(\"whatsapp://send?text=\" + message);\n//   window.open(\"whatsapp://send?text=\" + message, '_blank' );\n\n\n// }, false);\n\n\n// var scrollBack = document.getElementById(\"scrollBackButton\");\n// scrollBack.style.display = 'none';\n\nfunction is_touch_device() {  \n  try {  \n    document.createEvent(\"TouchEvent\");  \n    return true;  \n  } catch (e) {  \n    return false;  \n  }  \n}\n\n//console.log(is_touch_device());\n\ndocument.body.addEventListener('change', function (e) {\n  let target = e.target;\n  console.log(target.id);\n  if(target.id === \"langCheckbox\")\n  {\n    //console.log(document.getElementById(\"muteButtonCkBox\").checked);\n    if(document.getElementById(\"langCheckbox\").checked)\n      console.log(\"EN\"); //off\n    else\n      console.log(\"AR\"); //on\n  }\n});\n\nvar isTouchScreen = is_touch_device();\n\ninit();\nanimate();\n\n\nvar audioController = new Audio();\n// audioController.src = \"./sounds/Loop1_StartAmbient.mp3\";\n// audioController.src = \"./sounds/Ascend2City.mp3\";;\n// audioController.src = \"./sounds/Loop2_SceneTwo.mp3\";;\n\nvar muteButton = document.getElementById(\"muteButton\");\nvar musicVolume = 1;\n// buttonI.innerHTML = \"<em>i</em>\"\nmuteButton.addEventListener('click', function() \n{\n  controlMuteButton()\n}, false);\n\nfunction controlMuteButton()\n{\n  if(document.getElementById(\"muteCheckbox\").checked)\n  {\n    //pause();\n    musicVolume = 0;\n    TweenMax.to(audioController, 0.3, {volume:musicVolume});\n  }\n  else \n  {\n    //audioController.play();\n    musicVolume = 1;\n    TweenMax.to(audioController, 0.3, {volume:musicVolume});\n  }\n}\n\nvar trackDuration = 0;\n\nfunction playAudio(fileName)\n{\n  \n  //if(audioController.playing)\n  trackDuration = 0;//audioController.currentTime;\n  //if(audioController.playing)\n  //{\n    //TweenMax.to(audioController, 0.5, {volume:0});\n    //audioController.pause();\n    //audioController.currentTime = 0;\n    //TweenMax.to(audioController, 0.5, {volume:0, onComplete:switchAudio, onCompleteParams:[fileName]});\n    switchAudio(fileName);\n  //}\n\n    // console.log(audioController);\n  // audioController.addEventListener('loadeddata', () => {\n  //   //let duration = audioController.duration;\n  //   //console.log('load complete ', duration);\n  //   // The duration variable now holds the duration (in seconds) of the audio clip \n  //   audioController.muted = false;\n  //   audioController.loop = true;\n  //   audioController.volume = 0.0;\n  //   audioController.play();\n  //   TweenMax.to(audioController, 0.5, {volume:1});\n  //   audioController.removeEventListener('loadeddata', () => {});\n  // });\n}\n\nfunction switchAudio(name)\n{\n  // console.log(\"FileName : \"+name);\n\n  audioController.src = name;\n  //audioController = new Audio(fileName);\n  audioController.load();\n\n  audioController.addEventListener('loadeddata', () => {\n\n    audioController.muted = false;\n    audioController.loop = true;\n    audioController.currentTime = trackDuration;\n    //audioController.volume = 0.0;\n    audioController.play();\n    //TweenMax.to(audioController, 0.5, {volume:musicVolume});\n\n  });\n}\n\n// audioController = new Audio(\"./sounds/Loop1_StartAmbient.mp3\");\n//   audioController.addEventListener('loadeddata', () => {\n//     let duration = audioController.duration;\n//     console.log('load complete ', duration);\n//     // The duration variable now holds the duration (in seconds) of the audio clip \n//     audioController.loop = true;\n//     //audioController.volume = 0.1;\n//     audioController.play();\n//     TweenMax.to(audioController, 0.5, {volume:0});\n//   });\n//audioController.play();\n\nvar itemsInfoData = [\n  {\n    zoneNameAR : 'ثقافة غنية و تراث عميق',\n    zoneNameEN : 'Rich Culture and Deep Heritage',\n    items : [{ \n      headingEN : \"Madain Saleh \",\n      infoEN : \"As if they were paintings made by nature and the most admired historical regions in the Kingdom. As our great leadership made sure to highlight the historical wealth of the Kingdom, it was registered in the UNESCO World Heritage List and made it a tourist and cultural icon, due to its close age of 1900 years, and the presence of a number of distinctive historical monuments and 153 amazing rock sculptures.\",\n      heading : \"مدائن صالح\",\n      info : \"كأنها لوحات فنية من صنع الطبيعة ومن أعجب المناطق التاريخية في المملكة. من حرص قيادتنا الكريمة على إبراز ثروات المملكة التاريخية، تم تسجيلها في قائمة اليونيسكو العالمية في قائمة مواقع التراث العالمي و جعلها أيقونة سياحية و ثقافية، ذلك لعمرها المقارب ل 1900 عام، و لوجود عدد من الآثار التاريخية المميزة بها و153 منحوتة صخرية مدهشة.\"\n    }, {\n      headingEN : \"Nassif House\",\n      infoEN : \"Is one of the most beautiful palaces in the historical city of Jeddah and has a historical and political presence in the Kingdom, was established in 1289 AH. Built by Sheikh Omar Effendi Nassif, and it is one of the greatest architectural styles in the old city of Jeddah. It was registered in the UNESCO World Heritage List as a heritage landmark in 2014.\",\n      heading : \"بيت نصيف\",\n      info : \"من أجمل قصور مدينة جدة التاريخية وله أهمية تاريخية وسياسية في المملكة، أُنشئ في عام 1289هـ. بناه الشيخ عمر أفندي نصيف وهو أحد الشواهد على النمط المعماري القديم في مدينة جدة تم تسجيله في قائمة اليونيسكو العالمية في قائمة مواقع التراث العالمي كمعلم تراثي في عام 2014.\"\n    }, {\n      headingEN : \"Al-Ula\",\n      infoEN : \"Jabal Al-Fil (Elephant Rock) is one of the most famous natural landmarks of the kingdom, it's 50 meters height and it is distinguished by its unique shape that resembles an elephant. The rock is surrounded by a group of light-colored mountains. Jabal Al-Feel is located 7 km to the east of Al-Ula Governorate, in Medina region.\",\n      heading : \"العلا\",\n      info : \"جبل الفيل هو أحد أشهر معالم المملكة الطبيعية، يبلغ ارتفاعها عن الأرض 50 متر وتتميز بشكلها الفريد الذي يشبه الفيل وتحيط بالصخرة مجموعة من الجبال ذات الألوان الفاتحة، تشكل هذا الجبل منذ ملايين السنين ليأخذ شكله الحالي لضعف في أجزاء الجبل أثرت فيها عوامل التعرية لتنحته بهذا الشكل، يقع جبل الفيل على بعد ٧ كم إلى جهة الشرق من محافظة العلا التابعة لمنطقة المدينة المنورة.\"\n    }]\n  },\n  {\n    \n    zoneNameAR : 'إقتصاد مزدهر ومستقبل واعد',\n    zoneNameEN : 'A Prosperous Economy and a Promising Future',\n\n    items : [{\n      headingEN : \"ITTC (King Abdullah Financial District)\",\n      infoEN : \"The Kingdom was keen to invest in its economy to open many investment opportunities and provide a safe and healthy work environment for everyone, and among these initiatives was the establishment of the King Abdullah Financial District, which represents a very important addition to the high-level economic sector and urban development in Riyadh.\",\n      heading : \"مدينة الملك عبدالله المالية\",\n      info : \"حرصت المملكة على الإستثمار في اقتصادها لفتح العديد من الفرص الاستثمارية وتوفير بيئة عمل آمنة وصحية للجميع، ومن ضمن هذه المبادرات تم تأسيس مركز الملك عبدالله المالي والذي يمثل إضافة بالغة الأهمية للقطاع الاقتصادي والتطوير العمراني راقي المستوى بمدينة الرياض.\"\n    }, {\n      headingEN : \"Neom\",\n      infoEN : \"The Kingdom is witnessing a rapid cultural and urban growth as a result of demographic, social and economic growth, which led to the implementation of the \\\"The Future of Saudi Cities\\\" program with the aim of achieving sustainable urbanization towards the future. Neom city was established to become a global platform through which entrepreneurship and innovation develop.\",\n      heading : \"نيوم\",\n      info : \"تشهد المملكة نموا حضارياً وعمرانياً سريعاً جراء النمو الديمغرافي والاجتماعي والاقتصادي مما أدى إلى تنفيذ برنامج “مستقبل المدن السعودية” بهدف تحقيق التحضر المستدام نحو المستقبل وتم إنشاء مدينة نيوم لتصبحَ منصّة عالمية تنمي من خلالها ريادةُ الأعمال والابتكار\"\n    }, {\n      headingEN : \"Futuristic Factory\",\n      infoEN : \"The Kingdom of Saudi Arabia aspires, through its Vision 2030, to expand the elements of sustainable development and supply the national economy with new promising sectors. Therefore, it launched the \\\"National Industrial Development and Logistics Program\\\" in order to transform the Kingdom into a leading industrial power and an international logistical platform, as the program provides many developmental opportunities for the future of the Saudi industry.\",\n      heading : \"مستقبل المصانع\",\n      info : \" تطمح المملكة العربية السعودية من خلال رؤيتها 2030  إلى توسيع مقومات التنمية المستدامة، ورفد الاقتصاد الوطني بقطاعات جديدة واعدة، لذا أطلقت برنامج تطوير الصناعة الوطنية والخدمات اللوجستية بغية تحويل المملكة إلى قوة صناعية رائدة ومنصة لوجستية دولية، حيث يتيح البرنامج العديد من الفرص التطويرية  لمستقبل الصناعة السعودية.\"\n    }]\n  },\n  {\n    zoneNameAR : 'رؤية طموحة ونمط حياة استثنائي',\n    zoneNameEN : 'Ambitious Vision and an Exceptional Lifestyle',\n\n    items : [{\n      headingEN : \"Entertainment\",\n      infoEN : \"MDL BEAST festival, is the first major international music festival in Saudi Arabia and is one of the initiatives developed and organized that aims to provide different types of cultural entertainment to the public in addition to contributing to improving the nation’s quality of life as well as support the cultural infrastructure in the Kingdom.\",\n      heading : \"الترفيه\",\n      info : \"مهرجان ميدل بيست، يعد أول مهرجان موسيقي ضخم على مستوى عالمي، وهو أحد المبادرات المطورة والمنظمة التي تهدف لتقديم وتوفير مختلف أنواع الثقافات والترفيه، بما يساهم في تحسين جودة الحياة ودعم البنية التحتية الثقافية في المملكة.\"\n    }, {\n      headingEN : \"Sports\",\n      infoEN : \"Sports cities are an innovative and modern landmark that translates the Kingdom's interest in sports as a lifestyle and its importance to highlight the capabilities of the Kingdom's young men and women globally, and it is a testament to its efforts and ambitious steps towards sports excellence by providing the best attractive sports facilities according to the highest international standards.\",\n      heading : \"الرياضة\",\n      info : \"المدن الرياضية، تعد معلماً إبداعياً وعصرياً،  تترجم عناية المملكة بالرياضة كنمط حياة وأهميتها لإبراز قدرات شباب وشابات المملكة عالمياً، وهي شاهد على جهودها وخطواتها الطموحة نحو الامتياز الرياضي بتوفير أفضل المرافق الرياضية الجاذبة وفق أعلى المعايير العالمية.\"\n    }, {\n      headingEN : \"Medical Sector\",\n      infoEN : \"Health organizations in the Kingdom have paid great attention to comprehensive healthcare, and have made great efforts to improve the quality of medical services and facilitate access to them. Human health is at the forefront of its priorities. Its unique and proactive experiences in this field are the best witness to this, and in the challenge of the Covid-19 pandemic it has proven its readiness and ability to maintain the health and safety of individuals and society.\",\n      heading : \"القطاع الصحي\",\n      info : \"المنظمات الصحية أولت المملكة عناية فائقة  بالرعاية الصحية الشاملة ، وبذلت جهودا عظيمة في تحسين جودة الخدمات الطبية وتسهيل الحصول عليها ،  فصحة الإنسان في مقدمة أولوياتها. وتجاربها الفريدة والسباقة في هذا المجال، خير شاهد على ذلك، وقد أثبتت  في مواجهتها لجائحة كورونا مدى جاهزيتها وقدرتها على المحافظة على صحة وسلامة الفرد\"\n    }]\n  }\n];\n\n// {\n\n//   zoneElements : [{\n\n//   }, {\n\n//   }, {\n\n//   }]\n\n//   // NassiefHouse : \"ثقافة غنية و تراث عميق\",\n//   // NassiefHouseInfo : \"بيت نصيف،  القصر الأشهر والأقدم في مدينة جدة، وأحد أبرز معالمها السياحية، امتزج بين جنباته التاريخ بالسياسة، تميز بطلته البهية ونمطه المعماري الذي يحكي عن حقبة تاريخية فريدة لهذه المدينة العريقة، بناه الشيخ عمر أفندي نصيف عام 1289هـ، تم تسجيله كمعلم تراثي في قائمة اليونسكو للتراث العالمي عام ٢٠١٤م\",\n//   // MadainSaleh  : \"ثقافة غنية و تراث عميق\",\n//   // MadainSalehInfo  : \"مدائن صالح، (مدينة الحِجْر) موقع أثري قديم، يعود تاريخها إلى عام ١٧٠٠ قبل الميلاد. تُظهر أطلالها الأعمال الهندسية الرائعة التي اشتهر بها الأنباط، فهناك 153 واجهة صخرية منحوتة في وسط عالم متموج من الرمال، إضافة إلى عدد من الآثار الإسلامية. وهي أول موقع في السعودية تم تسجيلها في قائمة اليونسكو للتراث العالمي عام  ٢٠٠٨م\"\n\n// };\n//var isLocked = false;\n\n\nfunction onBackButtonPressed()\n{\n  //console.log('clicked!');\n  if(transitionParams.transition===0)\n  {\n    currentZoneSelected = 1;\n    transitionParams.animateTransition = true;\n    //var xBody = document.getElementsByTagName(\"BODY\")[0];\n    //bodyElement.style.overflowY = 'scroll';\n\n    disableBodyScroll(bodyElement);\n\n    var xBody = document.getElementById(\"overlay\");\n    xBody.style.display = 'none';\n\n    xBody = document.getElementById(\"itemsInfo\");\n    xBody.style.display = 'none';\n\n    zonePanel.style.display = 'none';\n\n    rotateDiv.style.top = '80%';\n    rotateDiv.style.left = '40%';\n\n    //playAudio(\"./sounds/City.mp3\");\n    // document.body.scrollTop = 1000;\n    // window.scroll(0,1);\n    //scrollBack.style.display = 'block';\n  }\n}\n\nfunction onInfoButtonClicked()\n{\n  var xBody = document.getElementById(\"itemsDetails\");\n  //console.log(xBody.style.display);\n  if(xBody.style.display === 'none')\n  {\n    xBody.style.display = 'block';\n\n    // xBody = document.getElementById(\"itemsHeading\");\n    // if(languageSelected === 1)\n    // {\n    //   xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].headingEN;\n    //   xBody.style.textAlign = 'left';\n    // }\n    // else\n    // {\n    //   xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].heading;\n    //   xBody.style.textAlign = 'right';\n    // }\n\n    // xBody = document.getElementById(\"itemsDetails\");\n    if(languageSelected === 1)\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].infoEN;\n      xBody.style.textAlign = 'left';\n    }\n    else\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].info;\n      xBody.style.textAlign = 'right';\n    }\n    //xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].info;\n   \n  }\n  else\n  {\n    xBody.style.display = 'none';\n  }\n}\n\nfunction ResetHtmlCityInfoScene()\n{\n  var xBody = document.getElementById(\"itemsInfo\");\n  xBody.style.display = 'block';\n\n  xBody = document.getElementById(\"itemsDetails\");\n  xBody.style.display = 'none';\n}\n\nfunction hideAddressBar()\n{\n  if(!window.location.hash)\n  {\n      if(document.height < window.outerHeight)\n      {\n          document.body.style.height = (window.outerHeight + 50) + 'px';\n      }\n\n      setTimeout( function(){ window.scrollTo(0, 1); }, 100 );\n  }\n\n  if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) \n  { \n    // When ready, auto-scroll 1px to hide URL bar\n    window.addEventListener(\"load\", function () {\n        // Set a timeout...\n        setTimeout(function () {\n            // Hide the address bar!\n            window.scrollTo(0, 1);\n        }, 100);\n    });\n  }\n}\n\nwindow.addEventListener(\"load\", function(){ if(!window.pageYOffset){ hideAddressBar(); } } );\nwindow.addEventListener(\"orientationchange\", hideAddressBar );\n\nfunction onStartButtonPressed()\n{\n  console.log('Start Clicked!');\n\n  playAudio(\"./sounds/bg.mp3\");\n  // var myMusic = document.getElementById('player');\n  //   console.log(myMusic);\n  //   myMusic.muted = false;\n  //   myMusic.play();\n\n  // audioController.addEventListener('loadeddata', () => {\n  //   let duration = audioController.duration;\n  //   console.log('load complete ', duration);\n  //   // The duration variable now holds the duration (in seconds) of the audio clip \n  //   audioController.play();\n  // });\n\n  // audioController.src = \"./sounds.BG.mp3\";\n  // audioController.load();\n  // audioController.muted = false;\n \n\n  //var xBody = document.getElementsByTagName(\"BODY\")[0];\n  // bodyElement.style.overflowY = 'scroll';\n\n  enableBodyScroll(bodyElement);\n\n  var startButton = document.getElementById(\"startButton\");\n  startButton.style.display = 'none';\n\n  var scrollDiv = document.getElementById(\"scrollDiv\");\n  scrollDiv.style.display = 'block';\n}\n\nfunction onLangButtonPressed()\n{\n  // var langButton = document.getElementById(\"languageButton\");\n  // if(langButton.innerHTML === \"ع\")\n  // {\n  //   languageSelected = 0;\n  //   langButton.innerHTML = \"EN\";\n  //   //langButton.style.fontFamily = \"formulaCondensed\"\n  //   //langButton.style.fontSize = '1.3vw'\n  // }\n  // else\n  // {\n  //   languageSelected = 1;\n  //   langButton.innerHTML = \"ع\";\n  //   //langButton.style.fontFamily = \"AlmaraiBold\" \n  //   //langButton.style.fontSize = '1.5vw'\n  // }\n  if(document.getElementById(\"langCheckbox\").checked)\n  {\n    languageSelected = 1;\n  }\n  else \n  {\n    languageSelected = 0;\n  }\n\n  languageChangeRefrash();\n}\n\nfunction resetScrollPos(selector) {\n  var divs = document.querySelectorAll(selector);\n  for (var p = 0; p < divs.length; p++) {\n    if (Boolean(divs[p].style.transform)) { //for IE(10) and firefox\n      divs[p].style.transform = 'translate3d(0px, 0px, 0px)';\n    } else { //for chrome and safari\n      divs[p].style['-webkit-transform'] = 'translate3d(0px, 0px, 0px)';\n    }\n  }\n}\n\nvar bodyElement;\n\nfunction init() \n{\n  window.scrollTo(0,0); \n\n  \n  // var audio = new Audio('./sounds/BG.mp3');\n  // audio.play();\n\n  //resetScrollPos('body');\n  var myDiv = document.getElementById('root');\n  myDiv.scrollTo(0,0);// = 0;\n\n  bodyElement = document.getElementsByTagName(\"BODY\")[0];\n  bodyElement.style.overflowY = 'hidden';\n\n  // bodyElement = document.getElementById(\"experiance\");\n\n  disableBodyScroll(bodyElement);\n  //console.log(\"Aspect ratio : width : \" + window.innerWidth + \" height : \" + window.innerHeight + \"  ratio : \" +(window.innerWidth / window.innerHeight));\n \n  //initGUI();\n  document.getElementById('imgMountain').draggable = false;\n\n\tcontainer = document.getElementById( \"root\" );\n  renderer = new THREE.WebGLRenderer( { antialias: true} );\n  console.log(window.devicePixelRatio);\n\trenderer.setPixelRatio(2);// window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n  container.appendChild( renderer.domElement );\n  \n\t//stats = new Stats();\n  //container.appendChild( stats.dom );\n  \n\tvar sceneA = new City();//FXScene( \"cube\", 5000, 1200, 120, new THREE.Vector3( 0, - 0.4, 0 ), 0xffffff );\n  var sceneB = new CityInfo();//FXScene( \"sphere\", 500, 2000, 50, new THREE.Vector3( 0, 0.2, 0.1 ), 0xff0000 );\n  \n  transition = new Transition( sceneA, sceneB );\n  \n  // scrollBack.addEventListener('click', function(){\n  //   onScrollBackButtonClicked();\n  // }, false);\n\n  var startButton = document.getElementById(\"startButton\");\n  startButton.style.color = 0xffffff;\n\n  startButton.addEventListener('click', function() {\n    onStartButtonPressed();\n  }, false);\n\n  var langButton = document.getElementById(\"languageButton\");\n  langButton.addEventListener('click', function() {\n    onLangButtonPressed();\n  }, false);\n\n\n  //var element = document.getElementById(\"overlay\");\n\n  // var button = document.createElement(\"button\");\n  // button.setAttribute(\"class\", \"backButton btn\");\n  // button.type  = 'button';\n  // button.innerHTML = 'Back';\n  // element.appendChild(button);\n\n  // var buttonI = document.createElement(\"button\");\n  // buttonI.setAttribute(\"class\", \"btn\");\n  // buttonI.type  = 'button';\n  // buttonI.innerHTML = 'i';\n  // buttonI.style.top = \"25%\";\n  // buttonI.style.left = \"50%\";\n  // element.appendChild(buttonI);\n\n  // var buttonR = document.createElement(\"button\");\n  // buttonR.setAttribute(\"class\", \"btn\");\n  // buttonR.type  = 'button';\n  // buttonR.innerHTML = '>';\n  // buttonR.style.top = \"50%\";\n  // buttonR.style.left = \"95%\";\n  // element.appendChild(buttonR);\n\n  // var buttonL = document.createElement(\"button\");\n  // buttonL.setAttribute(\"class\", \"btn\");\n  // buttonL.type  = 'button';\n  // buttonL.innerHTML = '<';\n  // buttonL.style.top = \"50%\";\n  // buttonL.style.left = \"5%\";\n  // element.appendChild(buttonL);\n\n  // button.setAttribute(\"class\", \"btnL\");\n  // button.type  = 'button';\n  // button.innerHTML = '<';\n\n  // element.appendChild(button);\n\n  var button = document.getElementById(\"backButton\");\n  button.addEventListener('click', function() {\n    onBackButtonPressed()\n  }, false);\n\n  var buttonR = document.getElementById(\"rightButton\");\n  // buttonR.innerHTML = \"<em>></em>\"\n  buttonR.addEventListener('click', function() {\n    onRightArrowClicked()\n  }, false);\n\n  var buttonL = document.getElementById(\"leftButton\");\n  // buttonL.innerHTML = \"<em><</em>\"\n  buttonL.addEventListener('click', function() {\n    onLeftArrowClicked()\n  }, false);\n\n  var buttonI = document.getElementById(\"infoButton\");\n  // buttonI.innerHTML = \"<em>i</em>\"\n  buttonI.addEventListener('click', function() {\n    onInfoButtonClicked()\n  }, false);\n}\n\n\n// function onScrollBackButtonClicked()\n// {\n//   //fullTimeline.seek(5);\n//   //window.scrollByPages(1);\n//   window.scrollBy(0, -window.innerHeight * 0.4);\n//   onScrollBackComplete();\n//   //TweenMax.to(cCamera.position, 1, {y:3250, z:450, onComplete:onScrollBackComplete} );\n// }\n\n// function onScrollBackComplete()\n// {\n//   isReachedCity=false;\n//   scrollBack.style.display = 'none';\n//   enableBodyScroll(bodyElement);\n// }\n\nfunction animate() {\n\trequestAnimationFrame( animate );\n  render();\n  \n\t//stats.update();\n}\n\n// function initGUI() {\n// \tvar gui = new GUI();\n// \tgui.add( transitionParams, \"useTexture\" ).onChange( function ( value ) {\n// \t\ttransition.useTexture( value );\n// \t} );\n// \tgui.add( transitionParams, 'loopTexture' );\n// \tgui.add( transitionParams, 'texture', { Perlin: 0, Squares: 1, Cells: 2, Distort: 3, Gradient: 4, Radial: 5 } ).onChange( function ( value ) {\n// \t\ttransition.setTexture( value );\n// \t} ).listen();\n// \tgui.add( transitionParams, \"textureThreshold\", 0, 1, 0.01 ).onChange( function ( value ) {\n// \t\ttransition.setTextureThreshold( value );\n// \t} );\n// \tgui.add( transitionParams, \"animateTransition\" );\n// \tgui.add( transitionParams, \"transition\", 0, 1, 0.01 ).listen();\n// \tgui.add( transitionParams, \"transitionSpeed\", 0.5, 5, 0.01 );\n// }\n\nfunction render() \n{\n\ttransition.render( clock.getDelta() );\n}\n\n// function loadMusic(camera)\n// {\n//   // create an AudioListener and add it to the camera\n//   var listener = new THREE.AudioListener();\n//   camera.add( listener );\n\n//   // create a global audio source\n//   var sound = new THREE.Audio( listener );\n\n//   // load a sound and set it as the Audio object's buffer\n//   var audioLoader = new THREE.AudioLoader();\n//   audioLoader.load( './sounds/bg2.ogg', function( buffer ) {\n//     //console.log(\"Music\");\n//     sound.setBuffer( buffer );\n//     sound.setLoop( true );\n//     sound.setVolume( 0.5 );\n//     sound.play();\n//   });\n  \n// }\n\nfunction Transition( sceneA, sceneB ) \n{\n  this.scene = new THREE.Scene();\n  \n  this.cameraOrtho = new THREE.OrthographicCamera( window.innerWidth / - 2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / - 2, - 10, 10 );\n\n\tthis.textures = [];\n\tvar loader = new THREE.TextureLoader();\n\t\n  this.transitionTexture = loader.load( './assets/transition.png' );\n    \n\tthis.quadmaterial = new THREE.ShaderMaterial( {\n\t\tuniforms: {\n\t\t\ttDiffuse1: {\n\t\t\t\tvalue: null\n\t\t\t},\n\t\t\ttDiffuse2: {\n\t\t\t\tvalue: null\n\t\t\t},\n\t\t\tmixRatio: {\n\t\t\t\tvalue: 0.0\n\t\t\t},\n\t\t\tthreshold: {\n\t\t\t\tvalue: 0.1\n\t\t\t},\n\t\t\tuseTexture: {\n\t\t\t\tvalue: 1\n\t\t\t},\n\t\t\ttMixTexture: {\n\t\t\t\tvalue: this.transitionTexture\n\t\t\t}\n\t\t},\n\t\tvertexShader: [\n\t\t\t\"varying vec2 vUv;\",\n\t\t\t\"void main() {\",\n\t\t\t\"vUv = vec2( uv.x, uv.y );\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\t\"}\"\n\t\t].join( \"\\n\" ),\n\t\tfragmentShader: [\n\t\t\t\"uniform float mixRatio;\",\n\t\t\t\"uniform sampler2D tDiffuse1;\",\n\t\t\t\"uniform sampler2D tDiffuse2;\",\n\t\t\t\"uniform sampler2D tMixTexture;\",\n\t\t\t\"uniform int useTexture;\",\n\t\t\t\"uniform float threshold;\",\n\t\t\t\"varying vec2 vUv;\",\n\t\t\t\"void main() {\",\n\t\t\t\"\tvec4 texel1 = texture2D( tDiffuse1, vUv );\",\n\t\t\t\"\tvec4 texel2 = texture2D( tDiffuse2, vUv );\",\n\t\t\t\"\tif (useTexture==1) {\",\n\t\t\t\"\t\tvec4 transitionTexel = texture2D( tMixTexture, vUv );\",\n\t\t\t\"\t\tfloat r = mixRatio * (1.0 + threshold * 2.0) - threshold;\",\n\t\t\t\"\t\tfloat mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);\",\n\t\t\t\"\t\tgl_FragColor = mix( texel1, texel2, mixf );\",\n\t\t\t\"\t} else {\",\n\t\t\t\"\t\tgl_FragColor = mix( texel2, texel1, mixRatio );\",\n\t\t\t\"\t}\",\n\t\t\t\"}\"\n\t\t].join( \"\\n\" )\n  } );\n  \n\tvar quadgeometry = new THREE.PlaneBufferGeometry( window.innerWidth, window.innerHeight );\n\tthis.quad = new THREE.Mesh( quadgeometry, this.quadmaterial );\n  this.scene.add( this.quad );\n  \n\t// Link both scenes and their FBOs\n\tthis.sceneA = sceneA;\n  this.sceneB = sceneB;\n  \n\tthis.quadmaterial.uniforms.tDiffuse1.value = sceneA.fbo.texture;\n  this.quadmaterial.uniforms.tDiffuse2.value = sceneB.fbo.texture;\n  \n  this.needChange = false;\n  \n\tthis.setTextureThreshold = function ( value ) {\n\t\tthis.quadmaterial.uniforms.threshold.value = value;\n  };\n  \n\tthis.useTexture = function ( value ) {\n\t\tthis.quadmaterial.uniforms.useTexture.value = value ? 1 : 0;\n  };\n  \n\tthis.setTexture = function ( i ) {\n\t\tthis.quadmaterial.uniforms.tMixTexture.value = this.transitionTexture;\n  };\n  \n  if ( transitionParams.loopTexture && ( transitionParams.transition === 0 || transitionParams.transition === 1 ) ) {\n    if ( this.needChange ) {\n      transitionParams.texture = 0;//( transitionParams.texture + 1 ) % this.textures.length;\n      this.quadmaterial.uniforms.tMixTexture.value = this.transitionTexture;//this.textures[ transitionParams.texture ];\n      this.needChange = false;\n    }\n  } else\n    this.needChange = true;\n    transitionParams.transition = 1;\n    transitionParams.animateTransition = false;\n\n  function updateTransitionState()\n  {\n    transitionParams.animateTransition = false;\n  }\n\n\tthis.render = function ( delta ) {\n    // Transition animation\n    //console.log(transitionParams.transition);\n\n\t\tif ( transitionParams.animateTransition ) {\n\t\t\t//var t = (Math.sin( transitionParams.transitionSpeed * clock.getElapsedTime() / Math.PI ) ) / 2;\n      //transitionParams.transition =  THREE.MathUtils.smoothstep( t, 0.3, 0.7 );\n\n      if ( transitionParams.transition === 0)\n      TweenMax.to(transitionParams, 0.1, {transition:1, onComplete:updateTransitionState, ease:\"none\"});\n      else\n      TweenMax.to(transitionParams, 0.1, {transition:0, onComplete:updateTransitionState, ease:\"none\"});\n\n      transitionParams.animateTransition = false;\n      // if(transitionParams.transition<=0)\n      // {\n\n      // }\n      // else\n      // {\n\n      // }\n\n      // if ( transitionParams.transition == 0 || transitionParams.transition == 1 )\n      // {\n      //   transitionParams.animateTransition = false;\n      // }\n\t\t\t//Change the current alpha texture after each transition\n\t\t\t// if ( transitionParams.loopTexture && ( transitionParams.transition == 0 || transitionParams.transition == 1 ) ) {\n\t\t\t// \tif ( this.needChange ) {\n\t\t\t// \t\ttransitionParams.texture = 0;//( transitionParams.texture + 1 ) % this.textures.length;\n\t\t\t// \t\tthis.quadmaterial.uniforms.tMixTexture.value = this.transitionTexture;//this.textures[ transitionParams.texture ];\n\t\t\t// \t\tthis.needChange = false;\n\t\t\t// \t}\n\t\t\t// } else\n\t\t\t// \tthis.needChange = true;\n\t\t}\n\t\tthis.quadmaterial.uniforms.mixRatio.value = transitionParams.transition;\n\t\t// Prevent render both scenes when it's not necessary\n\t\tif ( transitionParams.transition === 0 ) {\n      this.sceneB.render( delta, false );\n      //transitionParams.animateTransition = false;\n\t\t} else if ( transitionParams.transition === 1 ) {\n      this.sceneA.render( delta, false );\n      //transitionParams.animateTransition = false;\n\t\t} else {\n\t\t\t// When 0<transition<1 render transition between two scenes\n\t\t\tthis.sceneA.render( delta, true );\n\t\t\tthis.sceneB.render( delta, true );\n\t\t\trenderer.setRenderTarget( null );\n\t\t\trenderer.clear();\n\t\t\trenderer.render( this.scene, this.cameraOrtho );\n\t\t}\n\t};\n}\n\n//---------------------------------------City------------------------------------------------------\nvar isCityLoaded = false;\n\nwindow.addEventListener( 'resize', onWindowResize, false );\n\ndocument.addEventListener('mousemove', onDocumentMouseMove, false);\ndocument.addEventListener('mousedown', onDocumentMouseDown, false);\ndocument.addEventListener('mouseup', onDocumentMouseUp, false);\n\ndocument.addEventListener(\"touchstart\", onDocumentTouchStart, false);\ndocument.addEventListener(\"touchmove\", onDocumentTouchMove, false);\ndocument.addEventListener(\"touchend\", onDocumentTouchEnd, false);\n\n///// wireframe Material\nvar API = {\n  widthFactor: 1\n};\nvar uniforms = { 'widthFactor': { value: API.widthFactor } };\nvar wireframeMaterial = new THREE.ShaderMaterial( {\n\n  uniforms: uniforms,\n  vertexShader: document.getElementById( 'vertexShader' ).textContent,\n  fragmentShader: document.getElementById( 'fragmentShader' ).textContent,\n  side: THREE.DoubleSide\n\n} );\nwireframeMaterial.extensions.derivatives = true;\n\nvar cCamera, cScene;\n\nvar isWindowResized = false;\nvar counterToCheckScroll = 0;\n\nfunction City() \n{\n  var overlay = document.getElementById(\"overlay\");\n  overlay.style.display = 'none';\n\n  overlay = document.getElementById(\"itemsInfo\");\n  overlay.style.display = 'none';\n  zoneHeading.style.display = 'none';\n  zonePanel.style.display = 'none';\n  \n  this.clearColor = 0xffffff;\n  \n\tthis.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000 );\n  this.camera.position.z = 100;\n  \n  //sceneCameras.push(this.camera);\n\t// Setup scene\n  this.scene = new THREE.Scene();\n\n  cCamera = this.camera;\n  cScene = this.scene;\n  \n  // this.scene.add( new THREE.AmbientLight( 0x555555 ) );\n  \n\t// var light = new THREE.SpotLight( 0xffffff, 1.5 );\n\t// light.position.set( 0, 500, 2000 );\n  // this.scene.add( light );\n  \n  loadCity(this.scene, this.camera);\n\n\tvar renderTargetParameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat, stencilBuffer: false };\n  this.fbo = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );\n\n\tthis.render = function ( delta, rtt ) {\n\t\t\n\t\trenderer.setClearColor( this.clearColor);\n\t\tif ( rtt ) {\n\t\t\trenderer.setRenderTarget( this.fbo );\n\t\t\trenderer.clear();\n\t\t\trenderer.render( this.scene, this.camera );\n\t\t} else {\n      renderer.setRenderTarget( null );\n\n      if(isCityLoaded){\n      updateParticles(this.scene);\n      updateCloudSystem();\n\n      pinZ1.lookAt(sceneCityCamera[0].position);\n      pinZ2.lookAt(sceneCityCamera[0].position);\n      pinZ3.lookAt(sceneCityCamera[0].position);\n\n      counterToCheckScroll++;\n\n      if(isReachedCity && counterToCheckScroll > 30)\n      {\n        if(window.scrollY < document.body.scrollHeight)\n        {\n          window.scroll(0,document.body.scrollHeight);\n          //isWindowResized = false;\n          counterToCheckScroll = 0;\n        }\n\n      }\n      // backgroundPlane.position.y = this.camera.position.y - 300;\n      // backgroundPlane.position.z = this.camera.position.z - 1000;\n\n      // backgroundPlane.rotation.x = this.camera.rotation.x;\n\n      //console.log(backgroundPlane.rotation.x, this.camera.rotation.x);\n      }\n      //if(!isTouchScreen)\n        checkForZoneElements(this.scene, this.camera, mouse);\n      //else\n        //checkForZoneElements(this.scene, this.camera, touch);\n\n      if(this.camera.position.z > 435)\n        appState = 0;\n\n      if(this.camera.position.y > 3250 && this.camera.position.z < 350)\n        appState = 1;\n\n\t\t\trenderer.render( this.scene, this.camera );\n\t\t}\n  };\n  \n  \n}\n\nvar mouse = new THREE.Vector2();\n\nvar isMouseDown = false;\nvar isDragging = false;\nvar isTouchDragging = false;\n\nvar previousMousePosition = {\n    x: 0,\n    y: 0\n};\n\nvar raycaster = new THREE.Raycaster();\nraycaster.params.Line.threshold = 100;\n\nvar whichZoneFound = \"\";\nvar zone1 = null, zone2 = null, zone3 = null;\n//var baseZone1 = null, baseZone2 = null, baseZone3 = null;\n// document.addEventListener(\"drag\", onUserDrag());\n\n// function onUserDrag(event)\n// {\n  \n// }\n\nvar textShowOp = 0;\nvar zoneAnimation = 1;\nvar zoneAnimationCounter = 0;\n\nfunction checkForZoneElements(cityScene, cityCamera, mousePos) {\n  // find intersections\n\n  zoneAnimationCounter++;\n  if(zoneAnimationCounter > 100)\n  {\n    zoneAnimationCounter = 0;\n    zoneAnimation++;\n    if(zoneAnimation>=4)\n    {\n      zoneAnimation = 1;\n    }\n  }\n\n  if(isCityLoaded && transitionParams.transition===1)\n  {\n    raycaster = new THREE.Raycaster();\n    raycaster.setFromCamera( mousePos, cityCamera );\n\n    //var foundTarget = false;\n    // calculate objects intersecting the picking ray\n    var intersects = raycaster.intersectObjects( cityScene.children, true );\n\n    //console.log(mousePos, intersects);\n    whichZoneFound = \"\";\n    \n    // cultureTextAR.visible = false;\n    // lifestyleTextAR.visible = false;\n    // economyTextAR.visible = false;\n\n    // cultureTextEN.visible = false;\n    // lifestyleTextEN.visible = false;\n    // economyTextEN.visible = false;\n\n    if(appState===1)\n    {\n      for ( var i = 0; i < intersects.length; i++ ) \n      {\n        //console.log(intersects[ i ].object.parent.name);\n        if(intersects[ i ].object.parent.name === \"zone1\" && whichZoneFound===\"\")// || intersects[ i ].object.parent.name === \"zone2\" || intersects[ i ].object.parent.name === \"zone3\")\n        {\n          if(zone1!=null)\n          {\n            zone1.traverse( function ( child ) {            \n              if ( child.isMesh ) {                \n                //child.material.color.set( 0xefeb83 );\n                var target = new THREE.Color(0xFAA61A);\n                child.material.color.set( target );\n                //TweenMax.to(child.material.color, 0.1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n              }\n            } );\n\n            zone2.traverse( function ( child ) {            \n              if ( child.isMesh ) {                \n                //child.material.color.set( 0xefeb83 );\n                var target = new THREE.Color(0xffffff);\n                child.material.color.set( target );\n                //TweenMax.to(child.material.color, 0.1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n              }\n            } );\n\n            zone3.traverse( function ( child ) {            \n              if ( child.isMesh ) {                \n                //child.material.color.set( 0xefeb83 );\n                var target = new THREE.Color(0xffffff);\n                child.material.color.set( target );\n                //TweenMax.to(child.material.color, 0.1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n              }\n            } );\n            \n            // baseZone1.traverse( function ( child ) {            \n            //   if ( child.isMesh ) {                \n            //     //child.material.color.set( 0xffffff );\n            //     var target = new THREE.Color(0xffffff);\n            //     TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n            //   }\n            // } );\n\n            if(languageSelected === 1)\n            {\n              if(textShowOp===1)\n              {\n                //cultureTextEN.visible = true;\n              }\n              else{\n              zoneTitle.style.display = 'block';\n              zoneName.innerHTML = itemsInfoData[0].zoneNameEN;\n              zoneName.style.textAlign = 'left';}\n            }\n            else\n            {\n              if(textShowOp===1)\n              {\n                //cultureTextAR.visible = true;\n              }\n              else{\n              zoneTitle.style.display = 'block';\n              zoneName.innerHTML = itemsInfoData[0].zoneNameAR;\n              zoneName.style.textAlign = 'right';}\n            }\n\n            whichZoneFound = \"z1\";\n            currentZoneSelected = 1;\n            break;\n          }\n        }\n        // else\n        // {\n        //   if(zone1!=null)\n        //   {\n        //     zone1.traverse( function ( child ) {            \n        //       if ( child.isMesh ) {                \n        //         //child.material.color.set( 0xffffff );\n        //         var target = new THREE.Color(0xffffff);\n        //         child.material.color.set( target );\n        //         //TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n        //       }\n        //     } );\n\n        //     // baseZone1.traverse( function ( child ) {            \n        //     //   if ( child.isMesh ) {                \n        //     //     //child.material.color.set( 0xffffff );\n        //     //     var target = new THREE.Color(0x000000);\n        //     //     TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n        //     //   }\n        //     // } );\n        //   }\n        // }\n        \n        if(intersects[ i ].object.parent.name === \"zone2\" && whichZoneFound===\"\")// || intersects[ i ].object.parent.name === \"zone2\" || intersects[ i ].object.parent.name === \"zone3\")\n        {\n          if(zone2!=null)\n          {\n            zone2.traverse( function ( child ) {            \n              if ( child.isMesh ) {                \n                //child.material.color.set( 0x3d60b0 );\n                var target = new THREE.Color(0xFAA61A);//0xF7941D);\n                child.material.color.set( target );\n                //TweenMax.to(child.material.color, 0.1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n              }\n            } );\n\n            zone1.traverse( function ( child ) {            \n              if ( child.isMesh ) {                \n                //child.material.color.set( 0xefeb83 );\n                var target = new THREE.Color(0xffffff);\n                child.material.color.set( target );\n                //TweenMax.to(child.material.color, 0.1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n              }\n            } );\n\n            zone3.traverse( function ( child ) {            \n              if ( child.isMesh ) {                \n                //child.material.color.set( 0xefeb83 );\n                var target = new THREE.Color(0xffffff);\n                child.material.color.set( target );\n                //TweenMax.to(child.material.color, 0.1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n              }\n            } );\n\n            // baseZone3.traverse( function ( child ) {            \n            //   if ( child.isMesh ) {                \n            //     //child.material.color.set( 0xffffff );\n            //     var target = new THREE.Color(0xffffff);\n            //     TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n            //   }\n            // } );\n\n            // if(languageSelected === 1)\n            // economyTextEN.visible = true;\n            // else\n            // economyTextAR.visible = true;\n\n            if(languageSelected === 1)\n            {\n              if(textShowOp===1)\n              {\n                //economyTextEN.visible = true;\n              }\n              else{\n              zoneTitle.style.display = 'block';\n              zoneName.innerHTML = itemsInfoData[1].zoneNameEN;\n              zoneName.style.textAlign = 'left';}\n            }\n            else\n            {\n              if(textShowOp===1)\n              {\n                //economyTextAR.visible = true;\n              }\n              else{\n              zoneTitle.style.display = 'block';\n              zoneName.innerHTML = itemsInfoData[1].zoneNameAR;\n              zoneName.style.textAlign = 'right';}\n            }\n\n            //economyTextAR.visible = true;\n            whichZoneFound = \"z2\";\n            currentZoneSelected = 2;\n            break;\n          }\n        }\n        // else\n        // {\n        //   if(zone2!=null)\n        //   {\n        //     zone2.traverse( function ( child ) {            \n        //       if ( child.isMesh ) {                \n        //         //child.material.color.set( 0xffffff );\n        //         var target = new THREE.Color(0xffffff);\n        //         child.material.color.set( target );\n        //         //TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n        //       }\n        //     } );\n\n        //     // baseZone3.traverse( function ( child ) {            \n        //     //   if ( child.isMesh ) {                \n        //     //     //child.material.color.set( 0xffffff );\n        //     //     var target = new THREE.Color(0x000000);\n        //     //     TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n        //     //   }\n        //     // } );\n        //   }\n        // }\n\n        if(intersects[ i ].object.parent.name === \"zone3\" && whichZoneFound===\"\")// || intersects[ i ].object.parent.name === \"zone2\" || intersects[ i ].object.parent.name === \"zone3\")\n        {\n          if(zone3!=null)\n          {\n            zone3.traverse( function ( child ) {            \n              if ( child.isMesh ) {                \n                //child.material.color.set( 0xe183ef );\n                var target = new THREE.Color(0xFAA61A);//0xF37021);\n                child.material.color.set( target );\n                //TweenMax.to(child.material.color, 0.1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n              }\n            } );\n\n            zone2.traverse( function ( child ) {            \n              if ( child.isMesh ) {                \n                //child.material.color.set( 0xefeb83 );\n                var target = new THREE.Color(0xffffff);\n                child.material.color.set( target );\n                //TweenMax.to(child.material.color, 0.1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n              }\n            } );\n\n            zone1.traverse( function ( child ) {            \n              if ( child.isMesh ) {                \n                //child.material.color.set( 0xefeb83 );\n                var target = new THREE.Color(0xffffff);\n                child.material.color.set( target );\n                //TweenMax.to(child.material.color, 0.1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n              }\n            } );\n\n            // baseZone2.traverse( function ( child ) {            \n            //   if ( child.isMesh ) {                \n            //     //child.material.color.set( 0xffffff );\n            //     var target = new THREE.Color(0xffffff);\n            //     TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n            //   }\n            // } );\n            \n            // if(languageSelected === 1)\n            //   lifestyleTextEN.visible = true;\n            // else\n            //   lifestyleTextAR.visible = true;\n\n            if(languageSelected === 1)\n            {\n              if(textShowOp===1)\n              {\n              //lifestyleTextEN.visible = true;\n              }\n              else{\n              zoneTitle.style.display = 'block';\n              zoneName.innerHTML = itemsInfoData[2].zoneNameEN;\n              zoneName.style.textAlign = 'left';}\n            }\n            else\n            {\n              if(textShowOp===1)\n              {\n              //lifestyleTextAR.visible = true;\n              }\n              else{\n              zoneTitle.style.display = 'block';\n              zoneName.innerHTML = itemsInfoData[2].zoneNameAR;\n              zoneName.style.textAlign = 'right';}\n            }\n\n            //lifestyleTextAR.visible = true;\n            whichZoneFound = \"z3\";\n            currentZoneSelected = 3;\n            break;\n          }\n        }\n        // else\n        // {\n        //   if(zone3!=null)\n        //   {\n        //     zone3.traverse( function ( child ) {            \n        //       if ( child.isMesh ) {                \n        //         //child.material.color.set( 0xffffff );\n        //         var target = new THREE.Color(0xffffff);\n        //         //var target = new THREE.Color(0x03007C06);\n        //         child.material.color.set( target );\n        //         //TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n        //       }\n        //     } );\n        //     // baseZone2.traverse( function ( child ) {            \n        //     //   if ( child.isMesh ) {                \n        //     //     //child.material.color.set( 0xffffff );\n        //     //     var target = new THREE.Color(0x000000);\n        //     //     TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n        //     //   }\n        //     // } );\n        //   }\n        // }\n      }\n    }\n  }\n\n  if(whichZoneFound===\"\")\n    {\n      if(zone1!=null)\n      {\n        zone1.traverse( function ( child ) {            \n          if ( child.isMesh ) {                \n            //child.material.color.set( 0xffffff );\n            var target = new THREE.Color(0xffffff);\n            if(zoneAnimation===1)\n            {\n              target = new THREE.Color(0xF3843C);\n            }\n\n            //var target = new THREE.Color(0xffffff);\n            child.material.color.set( target );\n            //TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n\n            //cultureTextAR.visible = false;\n            //cultureTextEN.visible = false;\n\n            zoneTitle.style.display = 'none';\n            zoneName.innerHTML = \"\";\n          }\n        } );\n\n        // baseZone1.traverse( function ( child ) {            \n        //   if ( child.isMesh ) {                \n        //     //child.material.color.set( 0xffffff );\n        //     var target = new THREE.Color(0x000000);\n        //     child.material.color.set( target );\n        //     TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n        //   }\n        // } );\n      }\n\n      if(zone2!=null)\n      {\n        zone2.traverse( function ( child ) {            \n          if ( child.isMesh ) {                \n            //child.material.color.set( 0xffffff );\n            var target = new THREE.Color(0xffffff);\n            if(zoneAnimation===2)\n            {\n              target = new THREE.Color(0xF3843C);\n            }\n            child.material.color.set( target );\n            TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n\n            //lifestyleTextAR.visible = false;\n            //lifestyleTextEN.visible = false;\n\n            zoneTitle.style.display = 'none';\n            zoneName.innerHTML = \"\";\n          }\n        } );\n\n        // baseZone3.traverse( function ( child ) {            \n        //   if ( child.isMesh ) {                \n        //     //child.material.color.set( 0xffffff );\n        //     var target = new THREE.Color(0x000000);\n        //     child.material.color.set( target );\n        //     //TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n        //   }\n        // } );\n      }\n    \n      if(zone3!=null)\n      {\n        zone3.traverse( function ( child ) {            \n          if ( child.isMesh ) {                \n            //child.material.color.set( 0xffffff );\n            var target = new THREE.Color(0xffffff);\n            if(zoneAnimation===3)\n            {\n              target = new THREE.Color(0xF3843C);\n            }\n            child.material.color.set( target );\n            //TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n\n            //economyTextAR.visible = false;\n            //economyTextEN.visible = false;\n\n            zoneTitle.style.display = 'none';\n            zoneName.innerHTML = \"\";\n          }\n        } );\n\n        // baseZone2.traverse( function ( child ) {            \n        //   if ( child.isMesh ) {                \n        //     //child.material.color.set( 0xffffff );\n        //     var target = new THREE.Color(0x000000);\n        //     child.material.color.set( target );\n        //     //TweenMax.to(child.material.color, 1, {r:target.r, g:target.g, b:target.b, ease:Power2.easeOut} );\n        //   }\n        // } );\n      }\n    }\n}\n\nfunction onDocumentMouseMove(event) \n{\n  if(isMouseDown)\n    isDragging = true;\n\n  if(!isTouchScreen)\n  {\n    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\n    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n  }\n\n  var deltaMove = \n  {\n    x: event.offsetX-previousMousePosition.x,\n    y: event.offsetY-previousMousePosition.y\n  };\n\n  if(isDragging && appState===1 && transitionParams.transition===1) \n  {\n    var deltaRotationQuaternion = new THREE.Quaternion()\n        .setFromEuler(new THREE.Euler(\n            0,\n            (deltaMove.x * 0.2 * 0.0174533),\n            0,\n            'XYZ'\n        ));\n\n    fCity.quaternion.multiplyQuaternions(deltaRotationQuaternion, fCity.quaternion);\n\n    // if(fCity.rotation.y < MathUtils.degToRad(65) && fCity.rotation.y > MathUtils.degToRad(-25))\n    // {\n    //   //MathUtils.clamp(deltaRotationQuaternion.yaw, MathUtils.degToRad(-45), MathUtils.degToRad(45))\n    //   fCity.quaternion.multiplyQuaternions(deltaRotationQuaternion, fCity.quaternion);\n    //   //fCity.rotation.y += MathUtils.degToRad(deltaMove.x);\n    // }\n    // //else\n    // //{\n    //   if(fCity.rotation.y <= MathUtils.degToRad(-25))\n    //     fCity.rotation.y = MathUtils.degToRad(-24.99);\n    //   else if(fCity.rotation.y >= MathUtils.degToRad(65))\n    //     fCity.rotation.y = MathUtils.degToRad(64.99);\n    //}\n    \n  }\n\n  if(transitionParams.transition===0 && !isAnimatingItemInfo)\n  {\n    //console.log(mouse);\n    var itemToShow = ((currentZoneSelected-1) * itemsPerZone) + currentItem;//(numberOfZones*itemsPerZone) \n\n    TweenMax.to(sceneCityInfoCamera[0].position, 0.3, {x:(itemsCameraPos[itemToShow].x + (mouse.x)), y:(itemsCameraPos[itemToShow].y + (mouse.y)), z:itemsCameraPos[itemToShow].z, ease:\"none\"});\n    //TweenMax.to(sceneCityInfoCamera[0].rotation, 0.3, {y:THREE.MathUtils.degToRad(itemsCameraRot[itemToShow] + (mouse.x * 10)), ease:\"none\"});\n\n  }\n  \n  if(transitionParams.transition===0 && !isAnimatingItemInfo && isDragging)\n  {\n    var deltaRotation = new THREE.Quaternion()\n        .setFromEuler(new THREE.Euler(\n            0,\n            (deltaMove.x * 0.2 * 0.0174533),\n            0,\n            'XYZ'\n        ));\n\n    var itemToRotate = ((currentZoneSelected-1) * itemsPerZone) + currentItem;\n    //items3DModels[itemToRotate].position.y = items3DModelsPos[itemToRotate].y + 10;\n    //items3DModels[itemToRotate].quaternion.multiplyQuaternions(deltaRotation, items3DModels[itemToRotate].quaternion);\n    //console.log(items3DModels[itemToRotate].name);\n    liftHero(itemToRotate, 1);\n    rotateHero(itemToRotate, deltaRotation);\n  }\n\n  previousMousePosition = {x: event.offsetX, y: event.offsetY};\n}\n\nfunction onDocumentMouseDown(event) \n{\n  isMouseDown = true;\n\n  \n}\nfunction onDocumentMouseUp(event) \n{\n  if(!isTouchScreen && !isDragging && isCityLoaded && transitionParams.transition===1)\n  {\n    if(whichZoneFound===\"z1\" || whichZoneFound===\"z2\" || whichZoneFound===\"z3\")\n    {\n      whichZoneFound = \"\";\n      if(transitionParams.transition===1)\n      {\n        transitionParams.animateTransition = true;\n        //var xBody = document.getElementsByTagName(\"BODY\")[0];\n        bodyElement.style.overflowY = 'hidden';\n        disableBodyScroll(bodyElement);\n\n        var xBody = document.getElementById(\"overlay\");\n        xBody.style.display = 'block';\n\n        //xBody = document.getElementById(\"itemsInfo\");\n       \n        zonePanel.style.display = 'block';\n        zoneHeading.style.display = 'block';\n        //xBody.style.display = 'block';\n\n        zoneTitle.style.display = 'none';\n        // scrollBack.style.display = 'none';\n        //zoneHeading.innerHTML = \n        ResetHtmlCityInfoScene();\n\n        currentItem = 0;\n\n        updateLeftRightArrows();\n\n        welcomeToZone();\n        languageChangeRefrash();\n\n        rotateDiv.style.top = '70%';\n        rotateDiv.style.left = '20%';\n        //playAudio(\"./sounds/Items.mp3\");\n      }\n    }\n  }\n  \n  if(transitionParams.transition===0 && !isAnimatingItemInfo && isDragging)\n  {\n     var itemToRotate = ((currentZoneSelected-1) * itemsPerZone) + currentItem;\n    // items3DModels[itemToRotate].y = items3DModelsPos[itemToRotate].y;\n    // items3DModels[itemToRotate].rotation.y = 0;\n    liftHero(itemToRotate, 0);\n    resetRotation(itemToRotate);\n  }\n\n  isDragging = false;\n  isMouseDown = false;\n}\n\nfunction liftHero(number, amount)\n{\n  switch (number) {\n      case 0:\n        TweenMax.to(h1.position, 0.3, {y:amount});\n      break;\n      case 1:\n        TweenMax.to(h2.position, 0.3, {y:(amount+1)});\n      break;\n      case 2:\n        TweenMax.to(h3.position, 0.3, {y:amount+0.5});\n      break;\n      case 3:\n        TweenMax.to(h4.position, 0.3, {y:amount+0.25});\n      break;\n      case 4:\n        TweenMax.to(h5.position, 0.3, {y:amount});\n      break;\n      case 5:\n        TweenMax.to(h6.position, 0.3, {y:amount+0.30});\n      break;\n      case 6:\n        TweenMax.to(h7.position, 0.3, {y:amount});\n      break;\n      case 7:\n        TweenMax.to(h8.position, 0.3, {y:amount});\n      break;\n      case 8:\n        TweenMax.to(h9.position, 0.3, {y:amount});\n      break;\n  \n    default:\n      break;\n  }\n}\n\nfunction rotateHero(number, amount)\n{\n  switch (number) {\n      case 0:\n        h1.quaternion.multiplyQuaternions(amount, h1.quaternion);\n      break;\n      case 1:\n        h2.quaternion.multiplyQuaternions(amount, h2.quaternion);\n      break;\n      case 2:\n        h3.quaternion.multiplyQuaternions(amount, h3.quaternion);\n      break;\n      case 3:\n        h4.quaternion.multiplyQuaternions(amount, h4.quaternion);\n      break;\n      case 4:\n        h5.quaternion.multiplyQuaternions(amount, h5.quaternion);\n      break;\n      case 5:\n        h6.quaternion.multiplyQuaternions(amount, h6.quaternion);\n      break;\n      case 6:\n        h7.quaternion.multiplyQuaternions(amount, h7.quaternion);\n      break;\n      case 7:\n        h8.quaternion.multiplyQuaternions(amount, h8.quaternion);\n      break;\n      case 8:\n        h9.quaternion.multiplyQuaternions(amount, h9.quaternion);\n      break;\n    default:\n      break;\n  }\n}\n\nfunction resetRotation(number)\n{\n  switch (number) {\n      case 0:\n        TweenMax.to(h1.rotation, 0.3, {y:0});//, onComplete:()=>{h1.updateMatrix();}});\n      break;\n      case 1:\n        TweenMax.to(h2.rotation, 0.3, {y:0});//, onComplete:()=>{h1.updateMatrix();}});\n      break;\n      case 2:\n        TweenMax.to(h3.rotation, 0.3, {y:0});//, onComplete:()=>{h1.updateMatrix();}});\n      break;\n      case 3:\n        TweenMax.to(h4.rotation, 0.3, {y:0});//, onComplete:()=>{h1.updateMatrix();}});\n      break;\n      case 4:\n        TweenMax.to(h5.rotation, 0.3, {y:0});//, onComplete:()=>{h1.updateMatrix();}});\n      break;\n      case 5:\n        TweenMax.to(h6.rotation, 0.3, {y:0});//, onComplete:()=>{h1.updateMatrix();}});\n      break;\n      case 6:\n        TweenMax.to(h7.rotation, 0.3, {y:0});//, onComplete:()=>{h1.updateMatrix();}});\n      break;\n      case 7:\n        TweenMax.to(h8.rotation, 0.3, {y:0});//, onComplete:()=>{h1.updateMatrix();}});\n      break;\n      case 8:\n        TweenMax.to(h9.rotation, 0.3, {y:0});//, onComplete:()=>{h1.updateMatrix();}});\n      break;\n  \n    default:\n      break;\n  }\n}\n\nfunction updateLeftRightArrows()\n{\n  var buttonL, buttonR;\n  buttonL = document.getElementById(\"leftButton\");\n  buttonR = document.getElementById(\"rightButton\");\n\n  if(currentItem === 0)\n  {\n    buttonL.style.display = 'none'; \n    buttonR.style.display = 'block';\n  }\n  else if (currentItem === 2)\n  {\n    buttonL.style.display = 'block'; \n    buttonR.style.display = 'none';\n  }\n  else\n  {\n    buttonL.style.display = 'block'; \n    buttonR.style.display = 'block';\n  }\n  \n}\n\nfunction onDocumentTouchMove(event) \n{\n  if(event.touches.length === 1){\n  mouse.x = (event.touches[0].clientX / window.innerWidth) * 2 - 1;\n  mouse.y = -(event.touches[0].clientY / window.innerHeight) * 2 + 1;\n\n  if(isTouchDragging)\n  {\n    var rect = event.target.getBoundingClientRect();\n    var eventOffSetX = event.targetTouches[0].pageX - rect.left;\n    var eventOffSetY = event.targetTouches[0].pageY - rect.top;\n\n    var deltaMove = \n    {\n      x: eventOffSetX-previousMousePosition.x,\n      y: eventOffSetY-previousMousePosition.y\n    };\n\n    if(isTouchDragging && appState===1 && transitionParams.transition===1) \n    {\n      var deltaRotationQuaternion = new THREE.Quaternion()\n          .setFromEuler(new THREE.Euler(\n              0,\n              (deltaMove.x * 0.2 * 0.0174533),\n              0,\n              'XYZ'\n          ));\n\n      fCity.quaternion.multiplyQuaternions(deltaRotationQuaternion, fCity.quaternion);\n\n      // if(fCity.rotation.y < MathUtils.degToRad(65) && fCity.rotation.y > MathUtils.degToRad(-25))\n      // {\n      //   //MathUtils.clamp(deltaRotationQuaternion.yaw, MathUtils.degToRad(-45), MathUtils.degToRad(45))\n      //   fCity.quaternion.multiplyQuaternions(deltaRotationQuaternion, fCity.quaternion);\n      //   //fCity.rotation.y += MathUtils.degToRad(deltaMove.x);\n      // }\n      // //else\n      // //{\n      //   if(fCity.rotation.y <= MathUtils.degToRad(-25))\n      //     fCity.rotation.y = MathUtils.degToRad(-24.99);\n      //   else if(fCity.rotation.y >= MathUtils.degToRad(65))\n      //     fCity.rotation.y = MathUtils.degToRad(64.99);\n      //}\n      \n    }\n\n    // if(transitionParams.transition===0 && !isAnimatingItemInfo)\n    // {\n    //   //console.log(mouse);\n    //   var itemToShow = ((currentZoneSelected-1) * itemsPerZone) + currentItem;//(numberOfZones*itemsPerZone) \n\n    //   TweenMax.to(sceneCityInfoCamera[0].position, 0.3, {x:(itemsCameraPos[itemToShow].x + (mouse.x)), y:(itemsCameraPos[itemToShow].y + (mouse.y)), z:itemsCameraPos[itemToShow].z, ease:\"none\"});\n    //   //TweenMax.to(sceneCityInfoCamera[0].rotation, 0.3, {y:THREE.MathUtils.degToRad(itemsCameraRot[itemToShow] + (mouse.x * 10)), ease:\"none\"});\n\n    // }\n\n    if(transitionParams.transition===0 && !isAnimatingItemInfo && isTouchDragging)\n    {\n      var deltaRotation = new THREE.Quaternion()\n          .setFromEuler(new THREE.Euler(\n              0,\n              (deltaMove.x * 0.5 * 0.0174533),\n              0,\n              'XYZ'\n          ));\n  \n      var itemToRotate = ((currentZoneSelected-1) * itemsPerZone) + currentItem;\n      //items3DModels[itemToRotate].position.y = items3DModelsPos[itemToRotate].y + 10;\n      //items3DModels[itemToRotate].quaternion.multiplyQuaternions(deltaRotation, items3DModels[itemToRotate].quaternion);\n      //console.log(items3DModels[itemToRotate].name);\n      liftHero(itemToRotate, 1);\n      rotateHero(itemToRotate, deltaRotation);\n    }\n\n    previousMousePosition = {x: eventOffSetX, y: eventOffSetY};\n  }\n  }\n}\n\nvar whichZoneFoundPrev = \"\";\n\nfunction onDocumentTouchEnd(event) \n{\n  if(event.touches.length === 0)\n  {\n    isTouchDragging = false;\n  }\n\n  if(transitionParams.transition===0 && !isAnimatingItemInfo && event.touches.length === 0)\n  {\n     var itemToRotate = ((currentZoneSelected-1) * itemsPerZone) + currentItem;\n    // items3DModels[itemToRotate].y = items3DModelsPos[itemToRotate].y;\n    // items3DModels[itemToRotate].rotation.y = 0;\n    liftHero(itemToRotate, 0);\n    resetRotation(itemToRotate);\n  }\n}\n\nfunction onDocumentTouchStart(event) \n{\n  if(event.touches.length === 1){\n\n    isTouchDragging = true;\n    \n\n    if(transitionParams.transition===1 || transitionParams.transition===0)\n    {\n      var rect = event.target.getBoundingClientRect();\n      var eventOffSetX = event.targetTouches[0].pageX - rect.left;\n      var eventOffSetY = event.targetTouches[0].pageY - rect.top;\n      previousMousePosition = {x: eventOffSetX, y: eventOffSetY};\n    }\n\n    mouse.x = (event.touches[0].clientX/ window.innerWidth) * 2 - 1;\n    mouse.y = -(event.touches[0].clientY / window.innerHeight) * 2 + 1;\n\n    //console.log(mouse);\n    checkForZoneElements(cScene, cCamera, mouse);\n\n    //console.log(whichZoneFound);\n    if(isCityLoaded && transitionParams.transition===1 && whichZoneFoundPrev === whichZoneFound)\n    {\n      if(whichZoneFound===\"z1\" || whichZoneFound===\"z2\" || whichZoneFound===\"z3\")\n      {\n        whichZoneFound = \"\";\n        if(transitionParams.transition===1)\n        {\n          transitionParams.animateTransition = true;\n          //var xBody = document.getElementsByTagName(\"BODY\")[0];\n          bodyElement.style.overflowY = 'hidden';\n          disableBodyScroll(bodyElement);\n\n          var xBody = document.getElementById(\"overlay\");\n          xBody.style.display = 'block';\n\n          //xBody = document.getElementById(\"itemsInfo\");\n        \n          zonePanel.style.display = 'block';\n          zoneHeading.style.display = 'block';\n          //xBody.style.display = 'block';\n\n          zoneTitle.style.display = 'none';\n          // scrollBack.style.display = 'none';\n          //zoneHeading.innerHTML = \n          ResetHtmlCityInfoScene();\n\n          currentItem = 0;\n\n          updateLeftRightArrows();\n\n          welcomeToZone();\n          languageChangeRefrash();\n          rotateDiv.style.top = '70%';\n          rotateDiv.style.left = '20%';\n          //playAudio(\"./sounds/Items.mp3\");\n        }\n      }\n\n      // if(whichZoneFound===\"z1\" || whichZoneFound===\"z2\" || whichZoneFound===\"z3\")\n      // {\n      //   //whichZoneFound = \"\";\n      //   if(transitionParams.transition===1)\n      //   {\n      //     transitionParams.animateTransition = true;\n      //     var xBody = document.getElementsByTagName(\"BODY\")[0];\n      //     xBody.style.overflowY = 'hidden';\n\n      //     xBody = document.getElementById(\"overlay\");\n      //     xBody.style.display = 'block';\n\n      //     zoneTitle.style.display = 'none';\n\n      //     currentItem = 0;\n      //     welcomeToZone();\n      //   }\n      // }\n    }\n    whichZoneFoundPrev = whichZoneFound;\n\n  }\n\n\n}\n\n\n\nfunction onWindowResize() \n{\n  //console.log(\"Resize\");\n\n  if(isCityLoaded && isCityInfoLoaded){\n    sceneCityCamera[0].aspect = window.innerWidth / window.innerHeight;\n    console.log(sceneCityCamera[0].aspect);\n\n    if(sceneCityCamera[0].aspect < 1.25)\n    {\n      aspectTag.style.display = 'block';\n    }\n    else\n    {\n      aspectTag.style.display = 'none';\n    }\n\n    sceneCityCamera[0].updateProjectionMatrix();\n\n    sceneCityInfoCamera[0].aspect = window.innerWidth / window.innerHeight;\n    sceneCityInfoCamera[0].updateProjectionMatrix();\n\n  }\n  renderer.setSize( window.innerWidth, window.innerHeight );\n\n  // if(isReachedCity)\n  //   {\n  //     window.scroll(0,document.body.scrollHeight);\n  //   }\n  //enableBodyScroll(bodyElement);\n\n  isWindowResized = true;\n\n}\n\nvar fCity = new Object3D();\nvar appState = 0;\n//var mountainSprite;\n\n// var cultureTextAR;\n// var cultureTextEN;\n\n// var lifestyleTextAR;\n// var lifestyleTextEN;\n\n// var economyTextAR;\n// var economyTextEN;\n\n\ngsap.registerPlugin(ScrollTrigger);\nvar cloudSpriteMap1;\nvar cloudSpriteMap2;\n\nfunction setupAttributes( geometry ) {\n\n  var vectors = [\n    new THREE.Vector3( 1, 0, 0 ),\n    new THREE.Vector3( 0, 1, 0 ),\n    new THREE.Vector3( 0, 0, 1 )\n  ];\n\n  var position = geometry.attributes.position;\n  var centers = new Float32Array( position.count * 3 );\n\n  for ( var i = 0, l = position.count; i < l; i ++ ) {\n\n    vectors[ i % 3 ].toArray( centers, i * 3 );\n\n  }\n\n  geometry.setAttribute( 'center', new THREE.BufferAttribute( centers, 3 ) );\n\n}\n\n//var backgroundPlane;\nvar fullTimeline;\nvar pinZ1, pinZ2, pinZ3;\n\nfunction loadCity(cityScene, cityCamera)\n{\n  //console.log(cityScene.children);\n\n  appState = 0;\n  var mountain = null;\n  var cityPos = new Vector3(0, 3200, 0);\n  \n  cityScene.fog = new THREE.FogExp2(0xa0a0a0, 0.001);\n  //cityScene.background = new THREE.Color( 0x27465d );\n  cityScene.background = new THREE.Color( 0x00000000 );\n\n  var light = new THREE.AmbientLight( 0x404040 );\n  cityScene.add( light );\n\n  var directionalLight = new THREE.DirectionalLight( 0xffffff, 0.5 );\n  cityScene.add( directionalLight );\n\n  light = new THREE.DirectionalLight( 0xffffff, 0.5 );\n\tlight.position.set( 0, 200, 100 );\n\tlight.castShadow = true;\n\tlight.shadow.camera.top = 180;\n\tlight.shadow.camera.bottom = - 100;\n\tlight.shadow.camera.left = - 120;\n\tlight.shadow.camera.right = 120;\n  cityScene.add( light );\n\n  var manager = new THREE.LoadingManager();\n  manager.onStart = function ( url, itemsLoaded, itemsTotal ) \n  {\n    console.log( 'Started loading file: ' + url + '.\\nLoaded ' + itemsLoaded + ' of ' + itemsTotal + ' files.' );\n  };\n\n  manager.onLoad = function () \n  {\n    console.log( 'Loading complete!'); \n    \n    fCity.rotation.y = MathUtils.degToRad(20);\n    cityScene.add(fCity);\n\n    fullTimeline = new gsap.timeline({\n      scrollTrigger:{start:\"5%\", end:\"80%\", scrub:1, scroller: document.body}//, markers: true}\n      });\n\n    \n    fullTimeline.to(\"#imgMountain\",  1, {opacity:0, ease:\"none\"})\n    .to(\"#startButton\", 0.3, {opacity:0, ease:\"none\"},'-=1')\n    .to(mountain.children[0].material, 1, {opacity:1, ease:\"none\"},'-=1')\n    .to(mountain.children[0].children[0].material, 1, {opacity:1, ease:\"none\"},'-=1')\n    .to(cityCamera.position, 1, {y:150, z:100, ease:\"none\"})\n    .to(cityCamera.position, 2, {y:1250, z:100, ease:\"none\"})\n    .to(cityCamera.position, 2, {y:2250, z:300, ease:\"none\"})\n    .to(cityCamera.position, 1,  {y:3250, z:450, ease:\"none\", onStart:appStateChangeTo0})\n    .to(cityCamera.rotation, 1, {x:0, ease:\"none\"}, '-=1')\n    .to(cityCamera.position, 1, {y:3300, z:300, ease:\"none\", onStart:appStateChangeTo0, onComplete:appStateChangeTo1})\n    .to(cityCamera.rotation, 1, {x:(-30 * 0.0174533), onStart:appStateChangeTo0, ease:\"none\"}, '-=1')\n    .to(\"#scrollDiv\", 0.3, {opacity:0, ease:\"none\"}, '+=1');\n\n    TweenMax.to(pinZ1.position, 3, {y:3265, repeatDelay:0.1, repeat:-1,  yoyo:true, ease:Elastic.easeInOut});\n    TweenMax.to(pinZ2.position, 3, {y:3265, delay:2, repeatDelay:0.1, repeat:-1,  yoyo:true, ease:Elastic.easeInOut});\n    TweenMax.to(pinZ3.position, 3, {y:3265, delay: 1, repeatDelay:0.1, repeat:-1,  yoyo:true, ease:Elastic.easeInOut});\n\n    \n    window.scrollTo(0,0);\n    isCityLoaded = true;\n    \n    sceneCityCamera.push(cityCamera);\n\n    //createParticleSystem(cityScene, manager);\n    createCloudSystem(cityScene, manager);\n\n    if((window.innerWidth / window.innerHeight) < 1.25)\n    {\n      aspectTag.style.display = 'block';\n    } \n\n    loadingTag.style.display = 'none';\n\n    //playAudio(\"./sounds/Loop1_StartAmbient.mp3\");\n\n    //pinZ1.lookAt(sceneCityCamera[0].position);\n    //sound.play();\n  };\n\n  manager.onProgress = function ( url, itemsLoaded, itemsTotal ) \n  {\n    console.log( 'Loading file: ' + url + '.\\nLoaded ' + itemsLoaded + ' of ' + itemsTotal + ' files.' );\n  };\n\n  manager.onError = function ( url ) \n  {\n    console.log( 'There was an error loading ' + url );\n  };\n\n  // var listener = new THREE.AudioListener();\n  // cityCamera.add( listener );\n\n  // create a global audio source\n  // var sound = new THREE.Audio( listener );\n\n  // load a sound and set it as the Audio object's buffer\n  // var audioLoader = new THREE.AudioLoader();\n  // audioLoader.load( './sounds/bg2.ogg', function( buffer ) {\n  //   console.log(\"Music loaded\");\n  //   sound.setBuffer( buffer );\n  //   sound.setLoop( true );\n  //   sound.setVolume( 0.5 );\n  //   sound.play();\n  // });\n\n  //loadZoneNames(cityScene, manager);\n\n  cloudSpriteMap1 = new THREE.TextureLoader(manager).load( \"./assets/cloud.png\" );\n  cloudSpriteMap2 = new THREE.TextureLoader(manager).load( \"./assets/mrcloud.png\" );\n\n  //cultureTextAR.scale.set(200,50,1);\n  //cultureText.position.set(-20,3275,150);\n  //cultureText.position.set(-120,3250,30);\n\n\n  // var map = new THREE.TextureLoader(manager).load( \"./assets/pin.png\" );\n  // var materialimg = new THREE.SpriteMaterial( { map: map, color: 0xffffff, transparent: true, depthWrite:false} );\n\n  // pinZ1 = new THREE.Sprite( materialimg );\n  // pinZ1.scale.set(14.35,22.0,1);\n  // pinZ1.position.set(-20,3250,150);\n  // pinZ1.name = \"zone1\";\n  // pinZ1.lookAt(cityCamera.position);\n\n  // map = new THREE.TextureLoader(manager).load( \"./assets/HeritageEN.png\" );\n  // materialimg = new THREE.SpriteMaterial( { map: map, color: 0xffffff, transparent: true, depthWrite:false} );\n\n  // cultureTextEN = new THREE.Sprite( materialimg );\n  // cultureTextEN.scale.set(200,50,1);\n  // cultureTextEN.position.set(-20,3275,150);\n  // cultureTextEN.lookAt(cityCamera.position);\n\n  /////// life style\n\n  // map = new THREE.TextureLoader(manager).load( \"./assets/QualityOfLifeAR.png\" );\n  // materialimg = new THREE.SpriteMaterial( { map: map, color: 0xffffff, transparent: true, depthWrite:false} );\n\n  // lifestyleTextAR = new THREE.Sprite( materialimg );\n  // lifestyleTextAR.scale.set(200,50,1);\n  // lifestyleTextAR.position.set(-120,3250,30);\n  // lifestyleTextAR.lookAt(cityCamera.position);\n\n  // map = new THREE.TextureLoader(manager).load( \"./assets/QualityOfLifeEN.png\" );\n  // materialimg = new THREE.SpriteMaterial( { map: map, color: 0xffffff, transparent: true, depthWrite:false} );\n\n  // lifestyleTextEN = new THREE.Sprite( materialimg );\n  // lifestyleTextEN.scale.set(200,50,1);\n  // lifestyleTextEN.position.set(-120,3250,30);\n  // lifestyleTextEN.lookAt(cityCamera.position);\n\n  ////// economy \n\n  // map = new THREE.TextureLoader(manager).load( \"./assets/EconomyAR.png\" );\n  // materialimg = new THREE.SpriteMaterial( { map: map, color: 0xffffff, transparent: true, depthWrite:false} );\n\n  // economyTextAR = new THREE.Sprite( materialimg );\n  // economyTextAR.scale.set(200,50,1);\n  // economyTextAR.position.set(-100,3275,-100);\n  // economyTextAR.lookAt(cityCamera.position);\n\n  // map = new THREE.TextureLoader(manager).load( \"./assets/EconomyEN.png\" );\n  // materialimg = new THREE.SpriteMaterial( { map: map, color: 0xffffff, transparent: true, depthWrite:false} );\n\n  // economyTextEN = new THREE.Sprite( materialimg );\n  // economyTextEN.scale.set(200,50,1);\n  // economyTextEN.position.set(-100,3275,-100);\n  // economyTextEN.lookAt(cityCamera.position);\n\n  /////////////\n  \n  var loader = new FBXLoader(manager);\n  loader.load('./models/Mountain.fbx', function ( object ) \n  {\n    mountain = object.clone();\n\n    mountain.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: true});\n        //child.material = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: false, wireframe:true, side: THREE.FrontSide, blending: THREE.AdditiveBlending});\n        //child.material.opacity = 0.1;\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n        var wireframeMaterial = new THREE.LineBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n        //material.linewidth = 0.5;\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n\n        // child.geometry.deleteAttribute( 'normal' );\n\t\t\t\t// child.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\t// setupAttributes( child.geometry );\n\n\t\t\t\t// var mesh2 = new THREE.Mesh( child.geometry, wireframeMaterial );\n\t\t\t\t// mesh2.position.set( 15, -45, 0 );\n        // cityScene.add( mesh2 );\n        // mesh2.scale.multiplyScalar(5); \n      }\n      \n    } );\n\n      mountain.position.x = 15;\n      mountain.position.y = -45;\n      mountain.position.z = 0;\n\n      //console.log(mountain);\n\n      mountain.scale.multiplyScalar(.35); \n\n      mountain.name = \"mtn\";\n      mountain.children[0].material.opacity = 0;\n      mountain.children[0].children[0].material.opacity = 0;\n      cityScene.add( mountain );\n  } );\n\n  // var geometry = new THREE.PlaneBufferGeometry(3900, 2500, 100, 100, 1, true);\n  // var material = new THREE.ShaderMaterial({\n  // uniforms: {\n  //   color1: {\n  //     value: new THREE.Color(0xFED631)\n  //   },\n  //   color2: {\n  //     value: new THREE.Color(0xF3843C)\n  //   },\n  //   color3: {\n  //     value: new THREE.Color(0x03007C)\n  //   }\n  // },\n  // vertexShader: `\n  //   varying vec2 vUv;\n\n  //   void main() {\n  //     vUv = uv;\n  //     gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n  //   }\n  // `,\n  // fragmentShader: `\n  //   uniform vec3 color1;\n  //   uniform vec3 color2;\n  //   uniform vec3 color3;\n\n  //   varying vec2 vUv;\n    \n  //   void main() {\n  //     gl_FragColor = vec4(mix(color2, color3, vUv.y), 1.0);\n  //   }\n  // `,\n  // wireframe: false\n  // });\n  // //gl_FragColor = vec4(mix(color2, color3, vUv.y), 1.0);\n  // //vec4(mix(mix(color1, color2, vUv.y), mix(color2, color3, vUv.y), vUv.y), 1.0);\n  // //gl_FragColor = vec4(mix(mix(color1, color2, vUv.y * 0.5), mix(color2, color3, vUv.y * 0.5), vUv.y), 1.0);\n\n  // backgroundPlane = new THREE.Mesh(geometry, material);\n  // backgroundPlane.position.x = 0;\n  // backgroundPlane.position.y = 0;\n  // backgroundPlane.position.z = -500;\n  // cityScene.add(backgroundPlane);\n\n  loader.load('./models/pin.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshLambertMaterial({color: 0xf37021});\n      }\n    } );\n\n    object.position.x = -105;\n    object.position.y = 3260;\n    object.position.z = 170;\n    object.scale.multiplyScalar(.007); \n\n    pinZ1 = object.clone();\n    pinZ1.name=\"zone1\";\n\n    fCity.attach(pinZ1);\n  } );\n\n  loader.load('./models/pin.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshLambertMaterial({color: 0xf37021});\n      }\n    } );\n\n    object.position.x = -95;\n    object.position.y = 3260;\n    object.position.z = -110;\n    object.scale.multiplyScalar(.007); \n\n    pinZ2 = object.clone();\n    pinZ2.name=\"zone2\";\n\n    fCity.attach(pinZ2);\n  } );\n\n  loader.load('./models/pin.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshLambertMaterial({color: 0xf37021});\n      }\n    } );\n\n    object.position.x = 50;\n    object.position.y = 3260;\n    object.position.z = -15;\n    object.scale.multiplyScalar(.007); \n\n    pinZ3 = object.clone();\n    pinZ3.name=\"zone3\";\n\n    fCity.attach(pinZ3);\n  } );\n\n  loader.load('./models/CityRock.fbx', function ( object ) {\n\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n\n    object.position.x = cityPos.x;\n    object.position.y = cityPos.y;\n    object.position.z = cityPos.z;\n    \n    object.scale.multiplyScalar(.4); \n  \n    var obj = object.clone();\n    fCity.attach(obj);\n  } );\n\n  loader.load('./models/CityBase.fbx', function ( object ) {\n\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshLambertMaterial({color: 0x161616});\n      }\n      \n    } );\n\n    object.position.x = cityPos.x;\n    object.position.y = cityPos.y;\n    object.position.z = cityPos.z;\n\n    object.scale.multiplyScalar(.4); \n    \n    //baseZone1 = object.clone();\n    var obj = object.clone();\n    fCity.attach(obj);\n  } );\n\n  // loader.load('./models/BaseZone2.fbx', function ( object ) {\n\n  //   object.traverse( function ( child ) {            \n  //     if ( child.isMesh ) {                \n  //       child.castShadow = true;\n  //       child.receiveShadow = true;\n  //       child.material = new THREE.MeshLambertMaterial({color: 0x262626});\n  //     }\n      \n  //   } );\n\n  //   object.position.x = cityPos.x;\n  //   object.position.y = cityPos.y;\n  //   object.position.z = cityPos.z;\n\n  //   object.scale.multiplyScalar(.4); \n    \n  //   baseZone2 = object.clone();\n  //   fCity.attach(baseZone2);\n  // } );\n\n  // loader.load('./models/BaseZone3.fbx', function ( object ) {\n\n  //   object.traverse( function ( child ) {            \n  //     if ( child.isMesh ) {                \n  //       child.castShadow = true;\n  //       child.receiveShadow = true;\n  //       child.material = new THREE.MeshLambertMaterial({color: 0x262626});\n  //     }\n      \n  //   } );\n\n  //   object.position.x = cityPos.x;\n  //   object.position.y = cityPos.y;\n  //   object.position.z = cityPos.z;\n\n  //   object.scale.multiplyScalar(.4); \n    \n  //   baseZone3 = object.clone();\n  //   fCity.attach(baseZone3);\n  // } );\n\n  loader.load('./models/Sea.fbx', function ( object ) {\n\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;//2e528e    ///0c8da4\n        child.material = new THREE.MeshLambertMaterial({color: 0x202020});// 0x174463});\n      }\n      \n    } );\n\n    object.position.x = cityPos.x;\n    object.position.y = cityPos.y;\n    object.position.z = cityPos.z;\n\n    object.scale.multiplyScalar(.4); \n\n    var obj = object.clone();\n    fCity.attach(obj);\n  } );\n\n  // loader.load('./models/Greens.fbx', function ( object ) {\n\n  //   object.traverse( function ( child ) {            \n  //     if ( child.isMesh ) {                \n  //       child.castShadow = true;\n  //       child.receiveShadow = true;//2e528e    ///0c8da4\n  //       child.material = new THREE.MeshLambertMaterial({color: 0x0b4d24});\n  //     }\n      \n  //   } );\n\n  //   object.position.x = cityPos.x;\n  //   object.position.y = cityPos.y;\n  //   object.position.z = cityPos.z;\n\n  //   object.scale.multiplyScalar(.4); \n\n  //   var obj = object.clone();\n  //   fCity.attach(obj);\n  // } );\n\n  loader.load('./models/Roads.fbx', function ( object ) {\n\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true; //535353\n        child.material = new THREE.MeshLambertMaterial({color: 0x080808});\n      }\n      \n    } );\n\n    object.position.x = cityPos.x;\n    object.position.y = cityPos.y + 1;\n    object.position.z = cityPos.z;\n\n    object.scale.multiplyScalar(.4); \n    \n    var obj = object.clone();\n  \n    fCity.attach(obj);\n  } );\n\n  loader.load('./models/SurroundBuildings.fbx', function ( object ) {\n\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        //child.castShadow = true;\n        //child.receiveShadow = true;\n        child.material = new THREE.MeshLambertMaterial({color: 0x000000});//, transparent: true, wireframe:true});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0x404040, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n\n    object.position.x = cityPos.x;\n    object.position.y = cityPos.y;\n    object.position.z = cityPos.z;\n\n    object.scale.multiplyScalar(.4); \n    \n    var obj = object.clone();\n    \n    fCity.attach(obj);\n  } );\n\n  loader.load('./models/Zone01.fbx', function ( object ) {\n    // Greens // Zone01\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        //child.castShadow = true;\n        //child.receiveShadow = true;0xFED631\n        //child.material = new THREE.MeshLambertMaterial({color: 0xffffff, transparent: true, wireframe:true});\n        child.material = new THREE.MeshLambertMaterial({color: 0xFED631, transparent: false, wireframe:true});\n      }\n      \n    } );\n\n    object.position.x = cityPos.x;\n    object.position.y = cityPos.y + 1;\n    object.position.z = cityPos.z +1;\n\n    //position.set(-20,3250,150);\n\n    object.scale.multiplyScalar(.4); \n    \n    zone1 = object.clone();\n    //zone1.attach()\n    //floatingCity.push(obj);\n    zone1.name = \"zone1\";\n    //baseZone1.name = \"zone1\";\n    //zone1.attach(pinZ1);\n\n    fCity.attach(zone1);\n    //fCity.rotation.y = 1;\n    //scene.add(fCity);\n\n    //scene.add( object );\n  } );\n\n  loader.load('./models/Zone02.fbx', function ( object ) {\n\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        //child.castShadow = true;\n        //child.receiveShadow = true;\n        //child.material = new THREE.MeshLambertMaterial({color: 0xffffff, transparent: true, wireframe:true});\n        child.material = new THREE.MeshLambertMaterial({color: 0xF3843C, transparent: false, wireframe:true});\n      }\n      \n    } );\n\n    object.position.x = cityPos.x;\n    object.position.y = cityPos.y;\n    object.position.z = cityPos.z;\n\n    object.scale.multiplyScalar(.4); \n    \n    zone2 = object.clone();\n    zone2.name = \"zone2\";\n    //baseZone3.name = \"zone2\";\n    //zone2.attach(baseZone3);\n    fCity.attach(zone2);\n  } );\n\n  loader.load('./models/Zone03.fbx', function ( object ) { \n\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        //child.castShadow = true;\n        //child.receiveShadow = true;\n        //child.material = new THREE.MeshLambertMaterial({color: 0xffffff, transparent: true, wireframe:true});\n        child.material = new THREE.MeshLambertMaterial({color: 0x03007C, transparent: false, wireframe:true});\n      }\n      \n    } );\n\n    object.position.x = cityPos.x;\n    object.position.y = cityPos.y;\n    object.position.z = cityPos.z;\n\n    object.scale.multiplyScalar(.4); \n  \n    zone3 = object.clone();\n    zone3.name = \"zone3\";\n    //baseZone2.name = \"zone3\";\n    //zone3.attach(baseZone2);\n    fCity.attach(zone3);\n\n    // fCity.attach(cultureTextAR);\n    // fCity.attach(lifestyleTextAR);\n    // fCity.attach(economyTextAR);\n\n    //fCity.attach(pinZ1);\n    // fCity.attach(lifestyleTextEN);\n    // fCity.attach(economyTextEN);\n\n    // cultureTextAR.visible = false;\n    // lifestyleTextAR.visible = false;\n    // economyTextAR.visible = false;\n\n    // cultureTextEN.visible = false;\n    // lifestyleTextEN.visible = false;\n    // economyTextEN.visible = false;\n  } );\n  createParticleSystem(cityScene, manager);\n  //createCloudSystem(cityScene, manager);\n\n}\n// Culture  Quality of Life  Economy\n\nfunction loadZoneNames(cityScene, manager)\n{\n  var loader = new THREE.FontLoader(manager);\n\n  loader.load( 'fonts/helvetiker_regular.typeface.json', function ( font ) {\n\n    var fGeometry = new THREE.TextGeometry( 'Culture', {\n      font: font,\n      size: 100,\n      height: 5,\n      curveSegments: 12,\n      bevelEnabled: true,\n      bevelThickness: 10,\n      bevelSize: 8,\n      bevelOffset: 0,\n      bevelSegments: 5\n    } );\n\n    fGeometry = new THREE.BufferGeometry().fromGeometry( fGeometry );\n\n\t\tvar textMesh1 = new THREE.Mesh( fGeometry, new THREE.MeshPhongMaterial( { color: 0xF7941D} ) );\n\n\t\ttextMesh1.position.x = -10;\n\t\ttextMesh1.position.y = 3250;\n\t\ttextMesh1.position.z = 180;\n\n    textMesh1.scale.multiplyScalar(0.1);\n\n\t\ttextMesh1.rotation.x = 0;\n\t\ttextMesh1.rotation.y = THREE.MathUtils.degToRad(180);\n\n    //fCity.attach(textMesh1);\n    //cityScene.add(textMesh1);\n\n  } );\n}\n\nfunction appStateChangeTo0()\n{\n  appState=0;\n  fCity.rotation.y = MathUtils.degToRad(20);\n}\n\nvar isReachedCity = false;\n\n\nfunction appStateChangeTo1()\n{\n  appState=1;\n\n  if(!isReachedCity)\n  {\n    isReachedCity = true;\n    // scrollBack.style.display = 'block';\n    disableBodyScroll(bodyElement);\n\n    rotateDiv.style.display = 'block';\n    rotateDiv.style.top = '80%';\n    rotateDiv.style.left = '40%';\n    //playAudio(\"./sounds/City.mp3\");\n  }\n}\n\nfunction createParticleSystem(cityScene, manager)\n{\n  var materials = [], parameters;\n  \n  var geometry = new THREE.BufferGeometry();\n  var vertices = [];\n  var particles;\n\n  var textureLoader = new THREE.TextureLoader(manager);\n  textureLoader.crossOrigin = '';\n   var sprite1 = textureLoader.load( './assets/spark.png' );\n  // var sprite2 = textureLoader.load( './assets/snowflake2.png' );\n  // var sprite3 = textureLoader.load( './assets/snowflake3.png' );\n  // var sprite4 = textureLoader.load( './assets/snowflake4.png' );\n  // var sprite5 = textureLoader.load( './assets/snowflake5.png' );\n  var i = 0;\n\n  for (i = 0; i < 20000; i ++ ) {\n\n    var x = Math.random() * 10000 - 5000;\n    var y = Math.random() * 10000 - 5000;\n    var z = 1500 + ((Math.random() * 2000) - 1800);\n\n    vertices.push( x, y, z );\n\n  }\n\n  //var geometry = new THREE.BufferGeometry().setFromPoints(vertices);\n  //geometry.setDrawRange(0, 0);\n\n  geometry.setAttribute( 'position', new THREE.Float32BufferAttribute( vertices, 3 ) );\n\n  parameters = [\n    [[ 1.0, 0.2, 0.5 ], sprite1, 10 ],\n    [[ 0.95, 0.1, 0.5 ], sprite1, 5 ],\n    [[ 0.90, 0.05, 0.5 ], sprite1, 7 ],\n    [[ 0.85, 0, 0.5 ], sprite1, 8 ],\n    [[ 0.80, 0, 0.5 ], sprite1, 9 ]\n  ];\n\n  for (i = 0; i < parameters.length; i ++ ) {\n\n    var color = parameters[ i ][ 0 ];\n    var sprite = parameters[ i ][ 1 ];\n    var size = parameters[ i ][ 2 ];\n    \n    //materials[ i ] = new THREE.PointsMaterial( { color: 0xffffff, size: 10, map: sprite, blending: THREE.AdditiveBlending, transparent: true} );\n    materials[ i ] = new THREE.PointsMaterial( { color: 0xffffff, size: size, map: sprite, blending: THREE.AdditiveBlending, depthTest: false, transparent: true, fog: false } );\n    materials[ i ].color.setHSL( color[ 0 ], color[ 1 ], color[ 2 ] );\n\n    particles = new THREE.Points( geometry, materials[ i ] );\n\n    particles.rotation.x = Math.random() * 6;\n    particles.rotation.y = Math.random() * 6;\n    particles.rotation.z = Math.random() * 6;\n\n    cityScene.add( particles );\n  }\n}\n\n\nfunction updateParticles(cityScene)\n{\n  var time = Date.now() * 0.000005;\n  for ( var i = 0; i < cityScene.children.length; i ++ ) {\n    var object = cityScene.children[ i ];\n\n    if ( object instanceof THREE.Points ) {\n\n      object.rotation.y = time * ( i < 4 ? i + 1 : - ( i + 1 ) );\n\n    }\n  }\n}\n\nvar clouds = [];\nvar speeds = [];\nvar directions = [];\nvar speedFactor = 2;\n\nfunction createCloudSystem(cityScene, manager)\n{\n  //var spriteMap1 = new THREE.TextureLoader(manager).load( \"./assets/cloud.png\" );\n  //var spriteMap2 = new THREE.TextureLoader(manager).load( \"./assets/mrcloud.png\" );\n\n  var spriteMaterial1 = new THREE.SpriteMaterial( { map: cloudSpriteMap1, transparent: true, depthWrite:false} );\n  var spriteMaterial2 = new THREE.SpriteMaterial( { map: cloudSpriteMap2, transparent: true, depthWrite:false } );\n\t\n\tfor ( var i = 0; i < 300; i ++ ) \n\t{\n\t\tvar scale = 350 + Math.random() * 200\n\n    var spriteCloud;\n    if(Math.random() < 0.5)\n    {spriteCloud = new THREE.Sprite( spriteMaterial1 );}\n    else\n    {spriteCloud = new THREE.Sprite( spriteMaterial2 );}\n    \n    spriteCloud.scale.set(scale,scale,1);\n\t\n\t\tspriteCloud.position.x = Math.random() * 3000 - 1500\n\t\tspriteCloud.position.y = 900 + Math.random() * 2000;\n\t\tspriteCloud.position.z = (Math.random() * -500) - 300;\n\n\t\tspriteCloud.rotation.x = THREE.MathUtils.degToRad(Math.random() * 90);\n\t\tspriteCloud.rotation.y = 0;//THREE.MathUtils.degToRad(Math.random() * 90);\n\t\tspriteCloud.rotation.z = THREE.MathUtils.degToRad(Math.random() * 90);\n    \n    clouds.push(spriteCloud);\n    speeds.push(Math.random() * speedFactor);\n\n    if(Math.random() < 0.5)\n      {directions.push(0);}\n    else\n      {directions.push(0)}\n\n\t\tcityScene.add( spriteCloud );\n\t}\n\n  for ( var i = 0; i < 100; i ++ ) \n\t{\n\t\tvar scale = 500 + Math.random() * 200\n\n    var spriteCloud;\n    if(Math.random() < 0.5)\n    {spriteCloud = new THREE.Sprite( spriteMaterial1 );}\n    else\n    {spriteCloud = new THREE.Sprite( spriteMaterial2 );}\n    \n    spriteCloud.scale.set(scale,scale,1);\n\t\n\t\tspriteCloud.position.x = Math.random() * 3000 - 1500\n\t\tspriteCloud.position.y = 2700 + Math.random() * 200;\n\t\tspriteCloud.position.z = Math.random() * 2500 - 1250;\n\n\t\tspriteCloud.rotation.x = Math.random() * 2 * Math.PI;\n\t\tspriteCloud.rotation.y = Math.random() * 2 * Math.PI;\n\t\tspriteCloud.rotation.z = Math.random() * 2 * Math.PI;\n    \n    clouds.push(spriteCloud);\n    speeds.push(Math.random() * speedFactor);\n\n    if(Math.random() < 0.5)\n    {directions.push(0);}\n    else\n    {directions.push(0)}\n\n\t\tcityScene.add( spriteCloud );\n  }\n}\n\nfunction updateCloudSystem()\n{\n  for(var c = 0; c < clouds.length; c++)\n  {\n    if(directions[c] === 0)\n    {\n      clouds[c].position.x -= speeds[c]\n      if(clouds[c].position.x < (-1*((window.innerWidth/2) + (clouds[c].scale.x*2))) )\n      {\n        clouds[c].position.x = 1500;\n        directions[c] = 0;\n        speeds[c] = Math.random() * speedFactor;\n      }\n    }\n    else\n    {\n      clouds[c].position.x += speeds[c]\n      if(clouds[c].position.x > 1500)\n      {\n        directions[c] = 0;\n        speeds[c] = Math.random();\n      }\n    }\n  }\n}\n\n//---------------------------------------City END------------------------------------------------------\n\n\n//---------------------------------------City Info------------------------------------------------------\n\nfunction CityInfo() \n{\n  this.clearColor = 0x00000;\n  \n  this.camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1000 );\n\n  //sceneCameras.push(this.camera);\n\t//this.camera.position.z = 100;\n\t// Setup scene\n\tthis.scene = new THREE.Scene();\n\n  loadCityInfo(this.scene, this.camera);\n \n\tvar renderTargetParameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat, stencilBuffer: false };\n\tthis.fbo = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );\n\tthis.render = function ( delta, rtt ) {\n\t\t\n\t\trenderer.setClearColor( this.clearColor);\n\t\tif ( rtt ) {\n\t\t\trenderer.setRenderTarget( this.fbo );\n\t\t\trenderer.clear();\n\t\t\trenderer.render( this.scene, this.camera );\n\t\t} else {\n\t\t\trenderer.setRenderTarget( null );\n      renderer.render( this.scene, this.camera );\n      \n      if(zoneTitle.style.display === 'block')\n      {      \n        zoneTitle.style.display = 'none';\n        zoneName.innerHTML = \"\";\n      }\n\t\t}\n\t};\n}\n\nvar isCityInfoLoaded = false;\nvar itemsCameraPos = [];\nvar itemsCameraRot = [];\n//var items3DModels = [];\n//var items3DModelsPos = [];\n//var items3DModelsScale = [];\n//var items3DModelsRot = [];\nvar currentItem = 0;\nvar h1, h2, h3, h4, h5, h6, h7, h8, h9;\n//var cityInfoObject = [];\n\nfunction loadCityInfo(cityInfoScene, cityInfoCamera)\n{\n  //cityInfoCameraRef = cityInfoCamera;\n\n  //var size = 160;\n  //var divisions = 90;\n\n  // var gridHelper = new THREE.GridHelper( size, divisions );\n  // gridHelper.colorGrid = 0xffffff;\n  // cityInfoScene.add( gridHelper );\n\n  //itemsCameraPos = [new Vector3(0,5,7), new Vector3(0,5,22), new Vector3(0,5,37)];\n  //itemsCameraPos = new Array(3);\n\n  var light = new THREE.AmbientLight( 0x404040 ); // soft white light\n  cityInfoScene.add( light );\n\n  var directionalLight = new THREE.DirectionalLight( 0xffffff, 0.5 );\n  cityInfoScene.add( directionalLight );\n\n  light = new THREE.DirectionalLight( 0xffffff, 0.5 );\n\tlight.position.set( 0, 200, 100 );\n\tlight.castShadow = true;\n\tlight.shadow.camera.top = 180;\n\tlight.shadow.camera.bottom = - 100;\n\tlight.shadow.camera.left = - 120;\n\tlight.shadow.camera.right = 120;\n  cityInfoScene.add( light );\n  \n  /////// Middle\n  //M\n  //cityInfoCamera.position.set( 10, 5, 2);\n  //cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-5);\n\n  //F\n  // cityInfoCamera.position.set( 8, 5, 110);\n  // cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-10);\n\n  //L\n  // cityInfoCamera.position.set( 8, 5, -100);\n  // cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-20);\n\n  /////right\n  //M\n  // cityInfoCamera.position.set( 80, 3, 1);\n  // cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-5);\n\n  // //f\n  cityInfoCamera.position.set( 80, 3, 105);\n  cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-5);\n\n  //  //L\n  //  cityInfoCamera.position.set( 80, 3, -103);\n  //  cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-10);\n\n   /////Left\n  //M\n  // cityInfoCamera.position.set( -65, 3, -2);\n  // cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-5);\n\n  // cityInfoCamera.position.set( -70, 3, 107);\n  // cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-5);\n\n  // cityInfoCamera.position.set( -68, 3, -103);\n  // cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-20);\n\n  // //f\n  // cityInfoCamera.position.set( -80, 3, 105);\n  // cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-5);\n\n  //  //L\n  //  cityInfoCamera.position.set( -80, 3, -103);\n  //  cityInfoCamera.rotation.x = THREE.MathUtils.degToRad(-10);\n\n  //var posToLook = new Vector3(2,2,0);\n\n  //cityInfoCamera.lookAt( posToLook );\n\n  cityInfoScene.fog = new THREE.FogExp2(0x000000, 0.02);\n  cityInfoScene.background = new THREE.Color( 0x00000000 );\n\n  var lightCI = new THREE.AmbientLight( 0x404040 );\n  cityInfoScene.add( lightCI );\n\n  var directionalLightCI = new THREE.DirectionalLight( 0xffffff, 0.5 );\n  cityInfoScene.add( directionalLightCI );\n\n  light = new THREE.DirectionalLight( 0xffffff, 0.5 );\n\tlight.position.set( 0, 200, 100 );\n\tlight.castShadow = true;\n\tlight.shadow.camera.top = 180;\n\tlight.shadow.camera.bottom = - 100;\n\tlight.shadow.camera.left = - 120;\n\tlight.shadow.camera.right = 120;\n  cityInfoScene.add( light );\n\n  var manager = new THREE.LoadingManager();\n  manager.onStart = function ( url, itemsLoaded, itemsTotal ) \n  {\n    console.log( 'Started loading file: ' + url + '.\\nLoaded ' + itemsLoaded + ' of ' + itemsTotal + ' files.' );\n  };\n\n  manager.onLoad = function () \n  {\n    console.log( 'Loading complete!'); \n    //cityInfoCamera.lookAt(new Vector3(0,0,0));\n\n    itemsCameraPos.push(new Vector3(80, 3, 105));\n    itemsCameraPos.push(new Vector3(80, 3, 1));\n    itemsCameraPos.push(new Vector3(80, 3, -103));\n\n    itemsCameraPos.push(new Vector3(8, 5, 110));\n    itemsCameraPos.push(new Vector3(10, 5, 2));\n    itemsCameraPos.push(new Vector3(8, 5, -100));\n\n    itemsCameraPos.push(new Vector3(-70, 3, 107));\n    itemsCameraPos.push(new Vector3(-65, 3, -2));\n    itemsCameraPos.push(new Vector3(-68, 3, -103));\n    \n    itemsCameraRot.push(-5);\n    itemsCameraRot.push(-5);\n    itemsCameraRot.push(-10);\n\n    itemsCameraRot.push(-10);\n    itemsCameraRot.push(-5);\n    itemsCameraRot.push(-20);\n\n    itemsCameraRot.push(-5);\n    itemsCameraRot.push(-5);\n    itemsCameraRot.push(-20);\n\n    sceneCityInfoCamera.push(cityInfoCamera);\n    isCityInfoLoaded = true;\n    //cityInfoObject.push(cityInfoCamera);\n  };\n\n  manager.onProgress = function ( url, itemsLoaded, itemsTotal ) \n  {\n    console.log( 'Loading file: ' + url + '.\\nLoaded ' + itemsLoaded + ' of ' + itemsTotal + ' files.' );\n  };\n\n  manager.onError = function ( url ) \n  {\n    console.log( 'There was an error loading ' + url );\n  };\n  var loader = new FBXLoader(manager);\n  \n  loader.load('./models/terrain.fbx', function ( object ) {\n\n    //var model = new Object3D();\n    \n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0x333333, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n\n    object.position.x = 0;\n    object.position.y = 0;\n    object.position.z = 0;\n    \n    object.scale.multiplyScalar(.05); \n    //model = object.clone();\n    //zoneOneModels.push(model);\n\n    var obj = object.clone();\n    cityInfoScene.add(obj);\n  } );\n\n  // loader.load('./models/herobuildings.fbx', function ( object ) {\n\n  //   //var model = new Object3D();\n    \n  //   object.traverse( function ( child ) {            \n  //     if ( child.isMesh ) {                \n  //       child.castShadow = true;\n  //       child.receiveShadow = true;\n  //       child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n  //       var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t// \t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t// \t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n  //       child.add(wireframe);\n  //     }\n      \n  //   } );\n  //   object.position.x = 0;\n  //   object.position.y = 0;\n  //   object.position.z = 0;\n    \n  //   object.scale.multiplyScalar(.05); \n  //   //model = object.clone();\n  //   //zoneOneModels.push(model);\n\n  //   var obj = object.clone();\n  //   cityInfoScene.add(obj);\n  // } );\n\n  loader.load('./models/heros/madiansaleh.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n    var pos = new Vector3(75, 0, 95);\n    object.position.x = pos.x;\n    object.position.y = pos.y;\n    object.position.z = pos.z;\n\n    var scale = 0.06;\n    //var rotation = 0;\n\n    //items3DModelsPos.push(pos);\n    //items3DModelsRot.push(rotation);\n    //items3DModelsScale.push(scale);\n   \n    object.scale.multiplyScalar(scale); \n    //object.rotation.y = MathUtils.degToRad(rotation);\n\n    h1 = object.clone();\n    //items3DModels.push(obj);\n    cityInfoScene.add(h1);\n  } );\n\n  loader.load('./models/heros/nassief.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n    var pos = new Vector3(75, 1, -10);\n    object.position.x = pos.x;\n    object.position.y = pos.y;\n    object.position.z = pos.z;\n\n    var scale = 0.07;\n    //var rotation = 0;\n\n    //items3DModelsPos.push(pos);\n    //items3DModelsRot.push(rotation);\n    //items3DModelsScale.push(scale);\n   \n    object.scale.multiplyScalar(scale); \n    //object.rotation.y = MathUtils.degToRad(rotation);\n    \n    h2 = object.clone();\n   \n    cityInfoScene.add(h2);\n  } );\n\n  loader.load('./models/heros/Camelrock.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n    var pos = new Vector3(75, 0.5, -112);\n    object.position.x = pos.x;\n    object.position.y = pos.y;\n    object.position.z = pos.z;\n\n    var scale = 0.08;\n    //var rotation = 0;\n\n    //items3DModelsPos.push(pos);\n    //items3DModelsRot.push(rotation);\n    //items3DModelsScale.push(scale);\n   \n    object.scale.multiplyScalar(scale); \n    //object.rotation.y = MathUtils.degToRad(rotation);\n    \n    h3 = object.clone();\n    cityInfoScene.add(h3);\n  } );\n\n\n  ///////\n  loader.load('./models/heros/itcc00.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n    var pos = new Vector3(2, 0.25, 95);\n    object.position.x = pos.x;\n    object.position.y = pos.y;\n    object.position.z = pos.z;\n\n    var scale = 0.06;\n    //var rotation = 0;\n\n    //items3DModelsPos.push(pos);\n    //items3DModelsRot.push(rotation);\n    //items3DModelsScale.push(scale);\n   \n    object.scale.multiplyScalar(scale); \n    //object.rotation.y = MathUtils.degToRad(rotation);\n\n    h4 = object.clone();\n    cityInfoScene.add(h4);\n  } );\n\n  loader.load('./models/heros/future.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n    var pos = new Vector3(5, 0, -10);\n    object.position.x = pos.x;\n    object.position.y = pos.y;\n    object.position.z = pos.z;\n\n    var scale = 0.05;\n    //var rotation = 0;\n\n    //items3DModelsPos.push(pos);\n    //items3DModelsRot.push(rotation);\n    //items3DModelsScale.push(scale);\n   \n    object.scale.multiplyScalar(scale); \n    //object.rotation.y = MathUtils.degToRad(rotation);\n    \n    h5 = object.clone();\n    cityInfoScene.add(h5);\n  } );\n\n  loader.load('./models/heros/factory.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n    var pos = new Vector3(3, 0.30, -112);\n    object.position.x = pos.x;\n    object.position.y = pos.y;\n    object.position.z = pos.z;\n\n    var scale = 0.05;\n    //var rotation = 0;\n\n    //items3DModelsPos.push(pos);\n    //items3DModelsRot.push(rotation);\n    //items3DModelsScale.push(scale);\n   \n    object.scale.multiplyScalar(scale); \n    //object.rotation.y = MathUtils.degToRad(rotation);\n    \n    h6 = object.clone();\n    cityInfoScene.add(h6);\n  } );\n  /////////\n  loader.load('./models/heros/MDlBeast.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n    var pos = new Vector3(-75, 0, 95);\n    object.position.x = pos.x;\n    object.position.y = pos.y;\n    object.position.z = pos.z;\n\n    var scale = 0.05;\n    //var rotation = 0;\n\n    //items3DModelsPos.push(pos);\n    //items3DModelsRot.push(rotation);\n    //items3DModelsScale.push(scale);\n   \n    object.scale.multiplyScalar(scale); \n    //object.rotation.y = MathUtils.degToRad(rotation);\n\n    h7 = object.clone();\n    cityInfoScene.add(h7);\n  } );\n\n  loader.load('./models/heros/sport.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n    var pos = new Vector3(-70, 0, -15);\n    object.position.x = pos.x;\n    object.position.y = pos.y;\n    object.position.z = pos.z;\n\n    var scale = 0.05;\n    //var rotation = 0;\n\n    //items3DModelsPos.push(pos);\n    //items3DModelsRot.push(rotation);\n    //items3DModelsScale.push(scale);\n   \n    object.scale.multiplyScalar(scale); \n    //object.rotation.y = MathUtils.degToRad(rotation);\n    \n    h8 = object.clone();\n    cityInfoScene.add(h8);\n  } );\n\n  loader.load('./models/heros/medical.fbx', function ( object ) {\n    object.traverse( function ( child ) {            \n      if ( child.isMesh ) {                \n        child.castShadow = true;\n        child.receiveShadow = true;\n        child.material = new THREE.MeshBasicMaterial({color: 0x000000, transparent: false, wireframe:false});\n\n        var wireframeGeomtry = new THREE.WireframeGeometry( child.geometry );\n\t\t    var wireframeMaterial = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending});\n\t\t    var wireframe = new THREE.LineSegments( wireframeGeomtry, wireframeMaterial );\n        child.add(wireframe);\n      }\n      \n    } );\n    var pos = new Vector3(-71, 0, -110);\n    object.position.x = pos.x;\n    object.position.y = pos.y;\n    object.position.z = pos.z;\n\n    var scale = 0.05;\n    //var rotation = 0;\n\n    //items3DModelsPos.push(pos);\n    //items3DModelsRot.push(rotation);\n    //items3DModelsScale.push(scale);\n   \n    object.scale.multiplyScalar(scale); \n    //object.rotation.y = MathUtils.degToRad(rotation);\n    \n    h9 = object.clone();\n    cityInfoScene.add(h9);\n  } );\n  //////\n  // var geometry = new THREE.PlaneGeometry(2000, 2000, 20, 20);\n  // var material = new THREE.MeshBasicMaterial( {color: 0x000000, side: THREE.DoubleSide} );\n  // var plane = new THREE.Mesh( geometry, material );\n  // plane.rotation.x = MathUtils.degToRad(-90);\n  // plane.position.x = 0;\n  // plane.position.y = -1;\n  // plane.position.z = -100;\n\n  // cityInfoScene.add( plane );\n\n  // var geometry = new THREE.PlaneBufferGeometry(2000, 500, 100, 100, 1, true);\n  // var material = new THREE.ShaderMaterial({\n  // uniforms: {\n  //   color1: {\n  //     value: new THREE.Color(0xFED631)\n  //   },\n  //   color2: {\n  //     value: new THREE.Color(0xF3843C)\n  //   },\n  //   color3: {\n  //     value: new THREE.Color(0x03007C)\n  //   }\n  // },\n  // vertexShader: `\n  //   varying vec2 vUv;\n\n  //   void main() {\n  //     vUv = uv;\n  //     gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n  //   }\n  // `,\n  // fragmentShader: `\n  //   uniform vec3 color1;\n  //   uniform vec3 color2;\n  //   uniform vec3 color3;\n\n  //   varying vec2 vUv;\n    \n  //   void main() {\n  //     gl_FragColor = vec4(mix(color2, color3, vUv.y), 1.0);\n  //   }\n  // `,\n  // wireframe: false\n  // });\n  // //gl_FragColor = vec4(mix(color2, color3, vUv.y), 1.0);\n  // //vec4(mix(mix(color1, color2, vUv.y), mix(color2, color3, vUv.y), vUv.y), 1.0);\n  // //gl_FragColor = vec4(mix(mix(color1, color2, vUv.y * 0.5), mix(color2, color3, vUv.y * 0.5), vUv.y), 1.0);\n\n  // var mesh = new THREE.Mesh(geometry, material);\n  // mesh.position.x = 0;\n  // mesh.position.y = 0;\n  // mesh.position.z = -250;\n  // cityInfoScene.add(mesh);\n\n  // loader.load('./models/z1/al farida.fbx', function ( object ) {\n\n  //   var model = new Object3D();\n\n  //   object.traverse( function ( child ) {            \n  //     if ( child.isMesh ) {                \n  //       child.castShadow = true;\n  //       child.receiveShadow = true;\n  //       child.material = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true});\n  //     }\n      \n  //   } );\n\n  //   object.position.x = 0;\n  //   object.position.y = 0;\n  //   object.position.z = -15;\n    \n  //   object.scale.multiplyScalar(.04); \n  //   model = object.clone();\n  //   zoneOneModels.push(model);\n\n  //   var obj = object.clone();\n  //   cityInfoScene.add(obj);\n  // } );\n\n  // loader.load('./models/z1/nassief house.fbx', function ( object ) {\n\n  //   var model = new Object3D();\n\n  //   object.traverse( function ( child ) {            \n  //     if ( child.isMesh ) {                \n  //       child.castShadow = true;\n  //       child.receiveShadow = true;\n  //       child.material = new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, wireframe:true});\n  //     }\n      \n  //   } );\n\n  //   object.position.x = 0;\n  //   object.position.y = 0;\n  //   object.position.z = -30;\n    \n  //   object.scale.multiplyScalar(.045); \n  //   model = object.clone();\n  //   zoneOneModels.push(model);\n\n  //   var obj = object.clone();\n  //   cityInfoScene.add(obj);\n  // } );\n}\n\nfunction welcomeToZone()\n{\n  var itemToShow = ((currentZoneSelected-1) * itemsPerZone) + currentItem;\n  \n  sceneCityInfoCamera[0].position.x = itemsCameraPos[itemToShow].x;\n  sceneCityInfoCamera[0].position.y = itemsCameraPos[itemToShow].y;\n  sceneCityInfoCamera[0].position.z = itemsCameraPos[itemToShow].z;\n\n  sceneCityInfoCamera[0].rotation.x = THREE.MathUtils.degToRad(itemsCameraRot[itemToShow]);\n}\n\nfunction languageChangeRefrash()\n{\n  //if(transitionParams.transition===0)\n  //{\n    var xBody = document.getElementById(\"itemsHeading\");\n    if(languageSelected === 1)\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].headingEN;\n      xBody.style.textAlign = 'left';\n      xBody.style.fontFamily = 'formulaCondensed';\n    }\n    else\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].heading;\n      xBody.style.textAlign = 'right';\n      xBody.style.fontFamily = 'AlmaraiBold';\n    }\n    \n\n\n    // if(languageSelected === 1)\n    //   xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].headingEN;\n    // else\n    //   xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].heading;\n\n    xBody = document.getElementById(\"itemsDetails\");\n    if(languageSelected === 1)\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].infoEN;\n      xBody.style.textAlign = 'left';\n      xBody.style.fontFamily = 'acuminVariable';\n    }\n    else\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].info;\n      xBody.style.textAlign = 'right';\n      xBody.style.fontFamily = 'AlmaraiLight';\n    }\n\n    if(languageSelected === 1)\n    {\n      zoneHeading.innerHTML = itemsInfoData[currentZoneSelected-1].zoneNameEN\n      zoneHeading.style.textAlign = 'left';\n      zoneHeading.style.fontFamily = 'formulaCondensed';\n    }\n    else\n    {\n      zoneHeading.innerHTML = itemsInfoData[currentZoneSelected-1].zoneNameAR;\n      zoneHeading.style.textAlign = 'right';\n      zoneHeading.style.fontFamily = 'AlmaraiBold';\n    }\n\n    if(languageSelected === 1)\n    {\n      zoneName.innerHTML = itemsInfoData[currentZoneSelected-1].zoneNameEN\n      zoneHeading.style.textAlign = 'left';\n      zoneName.style.fontFamily = 'formulaCondensed';\n    }\n    else\n    {\n      zoneName.innerHTML = itemsInfoData[currentZoneSelected-1].zoneNameAR;\n      zoneHeading.style.textAlign = 'right';\n      zoneName.style.fontFamily = 'AlmaraiBold';\n    }\n\n  //}\n  \n    // var split = new SplitText(\"#words\", { type: \"words, chars\" });\n    // var vh = window.innerHeight;\n    // var vw = window.innerWidth;\n    // TweenMax.staggerFrom(\n    //   split.words,\n    //   1.25,\n    //   {\n    //     cycle: {\n    //       x: [-(vw / 2) - 100, 0, vw / 2 + 100, 0],\n    //       y: [0, -vh / 2 - 100, 0, vh / 2 + 100]\n    //     },\n    //     ease:Back.easeOut\n    //   },\n    //   0.1\n    // );\n\n    // splitAndAnimate();\n}\n\n// var textAnim;\n// var mySplitText;\n\n// function splitAndAnimate() {\n//   if(textAnim) {\n//     textAnim.kill();\n//   }\n  \n//   mySplitText = new SplitText(\"#itemsDetails\", {type:\"lines\"});\n//   var lines = mySplitText.lines; \n\n//   textAnim = gsap.timeline()\n//   .from(lines, {duration: 0.8, opacity:0, scale:0, y:80, rotationX:180, transformOrigin:\"0% 50% -50\",  ease:\"back\", stagger: 0.1, onComplete:allDone});\n// }\n\n// function allDone() {\n//   mySplitText.revert();\n// }\n\n//var numberOfZones = 3;\nvar itemsPerZone = 3;\nvar currentZoneSelected = 1;\n\nfunction UpdateItemsDetails()\n{\n    var xBody = document.getElementById(\"itemsHeading\");\n    if(languageSelected === 1)\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].headingEN;\n      xBody.style.textAlign = 'left';\n    }\n    else\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].heading;\n      xBody.style.textAlign = 'right';\n    }\n\n    xBody = document.getElementById(\"itemsDetails\");\n    if(languageSelected === 1)\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].infoEN;\n      xBody.style.textAlign = 'left';\n    }\n    else\n    {\n      xBody.innerHTML = itemsInfoData[currentZoneSelected-1].items[currentItem].info;\n      xBody.style.textAlign = 'right';\n    }\n\n}\nfunction onRightArrowClicked()\n{\n  //console.log(zoneOneModels);\n\n  if(transitionParams.transition === 0 && currentZoneSelected > 0)\n  {\n    ResetHtmlCityInfoScene();\n    if(!isAnimatingItemInfo)\n    {\n      if(currentItem<(itemsPerZone-1))\n        currentItem++;\n      \n      updateLeftRightArrows();\n      var itemToShow = ((currentZoneSelected-1) * itemsPerZone) + currentItem;//(numberOfZones*itemsPerZone) \n      TweenMax.to(sceneCityInfoCamera[0].position, 1, {x:itemsCameraPos[itemToShow].x, y:itemsCameraPos[itemToShow].y, z:itemsCameraPos[itemToShow].z, onComplete:itemsInfoCameraAnimFinished, ease:\"none\"});\n      TweenMax.to(sceneCityInfoCamera[0].rotation, 1, {x:THREE.MathUtils.degToRad(itemsCameraRot[itemToShow]), ease:\"none\"});\n\n      isAnimatingItemInfo = true;\n    }\n\n    UpdateItemsDetails();\n    // else if(whichZoneFound===\"z2\")\n    // {\n\n    // }\n    // else if(whichZoneFound===\"z3\")\n    // {\n\n    // }\n    // currentItem++;\n    // if(currentItem>=itemsCameraPos.length)\n    //   currentItem = 0;\n\n    // TweenMax.to(cityInfoObject[0].position, 1, {x:itemsCameraPos[currentItem].x, y:itemsCameraPos[currentItem].y, z:itemsCameraPos[currentItem].z, ease:\"none\"});\n  }\n}\nvar isAnimatingItemInfo = false;\n\nfunction itemsInfoCameraAnimFinished()\n{\n  isAnimatingItemInfo = false;\n}\n\nfunction onLeftArrowClicked()\n{\n  if(transitionParams.transition === 0 && currentZoneSelected > 0)\n  {\n    ResetHtmlCityInfoScene();\n\n    if(!isAnimatingItemInfo)\n    {\n      if(currentItem>0)\n        currentItem--;\n\n      updateLeftRightArrows();\n      var itemToShow = ((currentZoneSelected-1) * itemsPerZone) + currentItem;//(numberOfZones*itemsPerZone) \n\n      TweenMax.to(sceneCityInfoCamera[0].position, 1, {x:itemsCameraPos[itemToShow].x, y:itemsCameraPos[itemToShow].y, z:itemsCameraPos[itemToShow].z, onComplete:itemsInfoCameraAnimFinished, ease:\"none\"});\n      TweenMax.to(sceneCityInfoCamera[0].rotation, 1, {x:THREE.MathUtils.degToRad(itemsCameraRot[itemToShow]), ease:\"none\"});\n      isAnimatingItemInfo = true;\n    }\n\n    UpdateItemsDetails();\n  // if(transitionParams.transition===0)\n  // {\n  //   currentItem--;\n  //   if(currentItem<0)\n  //     currentItem = (itemsCameraPos.length-1);\n\n  //   TweenMax.to(cityInfoObject[0].position, 1, {x:itemsCameraPos[currentItem].x, y:itemsCameraPos[currentItem].y, z:itemsCameraPos[currentItem].z, ease:\"none\"});\n  // }\n  }\n}\n\n//---------------------------------------City Info END------------------------------------------------------"],"sourceRoot":""}